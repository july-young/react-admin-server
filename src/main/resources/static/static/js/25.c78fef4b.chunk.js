(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[25],{1333:function(e,t,i){var n=i(220);i(863),i(1343),i(1344);var a=i(1345),o=i(1346),r=i(635);n.registerLayout(a),n.registerVisual(o),n.registerProcessor(r("themeRiver"))},1343:function(e,t,i){var n=i(272),a=i(611),o=i(629).getDimensionTypeByAxis,r=i(326),s=i(216),l=i(228).groupData,u=i(247).encodeHTML,h=i(634),c=n.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){c.superApply(this,"init",arguments),this.legendVisualProvider=new h(s.bind(this.getData,this),s.bind(this.getRawData,this))},fixData:function(e){var t=e.length,i=l(e,(function(e){return e[2]})),n=[];i.buckets.each((function(e,t){n.push({name:t,dataList:e})}));for(var a=n.length,o=-1,r=-1,s=0;s<a;++s){var u=n[s].dataList.length;o<u&&(o=u,r=s)}for(var h=0;h<a;++h)if(h!==r)for(var c=n[h].name,d=0;d<o;++d){for(var g=n[r].dataList[d][0],p=n[h].dataList.length,f=-1,v=0;v<p;++v)if(n[h].dataList[v][0]===g){f=v;break}-1===f&&(e[t]=[],e[t][0]=g,e[t][1]=0,e[t][2]=c,t++)}return e},getInitialData:function(e,t){for(var i=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),n=s.filter(e.data,(function(e){return void 0!==e[2]})),l=this.fixData(n||[]),u=[],h=this.nameMap=s.createHashMap(),c=0,d=0;d<l.length;++d)u.push(l[d][2]),h.get(l[d][2])||(h.set(l[d][2],c),c++);var g=a(l,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:o(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),p=new r(g,this);return p.initData(l),p},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),i=[],n=0;n<t;++n)i[n]=n;var a=e.mapDimension("single"),o=l(i,(function(t){return e.get("name",t)})),r=[];return o.buckets.each((function(t,i){t.sort((function(t,i){return e.get(a,t)-e.get(a,i)})),r.push({name:i,indices:t})})),r},getAxisTooltipData:function(e,t){s.isArray(e)||(e=e?[e]:[]);for(var i,n=this.getData(),a=this.getLayerSeries(),o=[],r=a.length,l=0;l<r;++l){for(var u=Number.MAX_VALUE,h=-1,c=a[l].indices.length,d=0;d<c;++d){var g=n.get(e[0],a[l].indices[d]),p=Math.abs(g-t);p<=u&&(i=g,u=p,h=a[l].indices[d])}o.push(h)}return{dataIndices:o,nestestValue:i}},formatTooltip:function(e){var t=this.getData(),i=t.getName(e),n=t.get(t.mapDimension("value"),e);return!isNaN(n)&&null!=n||(n="-"),u(i+" : "+n)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),d=c;e.exports=d},1344:function(e,t,i){var n=i(220),a=i(840).Polygon,o=i(222),r=i(216),s=r.bind,l=r.extend,u=i(597),h=n.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(e){var t=e.getData(),i=this.group,n=e.getLayerSeries(),r=t.getLayout("layoutInfo"),h=r.rect,c=r.boundaryGap;function d(e){return e.name}i.attr("position",[0,h.y+c[0]]);var g=new u(this._layersSeries||[],n,d,d),p={};function f(r,s,u){var h=this._layers;if("remove"!==r){for(var c,d,g,f=[],v=[],y=n[s].indices,m=0;m<y.length;m++){var w=t.getItemLayout(y[m]),x=w.x,I=w.y0,b=w.y;f.push([x,I]),v.push([x,I+b]),c=t.getItemVisual(y[m],"color")}var M,P,A,D,S=t.getItemLayout(y[0]),_=t.getItemModel(y[m-1]),T=_.getModel("label"),V=T.get("margin");if("add"===r){var L=p[s]=new o.Group;d=new a({shape:{points:f,stackedOnPoints:v,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),g=new o.Text({style:{x:S.x-V,y:S.y0+S.y/2}}),L.add(d),L.add(g),i.add(L),d.setClipPath((M=d.getBoundingRect(),P=e,A=function(){d.removeClipPath()},D=new o.Rect({shape:{x:M.x-10,y:M.y-10,width:0,height:M.height+20}}),o.initProps(D,{shape:{width:M.width+20,height:M.height+20}},P,A),D))}else L=h[u],d=L.childAt(0),g=L.childAt(1),i.add(L),p[s]=L,o.updateProps(d,{shape:{points:f,stackedOnPoints:v}},e),o.updateProps(g,{style:{x:S.x-V,y:S.y0+S.y/2}},e);var N=_.getModel("emphasis.itemStyle"),R=_.getModel("itemStyle");o.setTextStyle(g.style,T,{text:T.get("show")?e.getFormattedLabel(y[m-1],"normal")||t.getName(y[m-1]):null,textVerticalAlign:"middle"}),d.setStyle(l({fill:c},R.getItemStyle(["color"]))),o.setHoverStyle(d,N.getItemStyle())}else i.remove(h[s])}g.add(s(f,this,"add")).update(s(f,this,"update")).remove(s(f,this,"remove")).execute(),this._layersSeries=n,this._layers=p},dispose:function(){}});e.exports=h},1345:function(e,t,i){var n=i(216),a=i(224);function o(e,t,i){if(e.count())for(var a,o=t.coordinateSystem,r=t.getLayerSeries(),s=e.mapDimension("single"),l=e.mapDimension("value"),u=n.map(r,(function(t){return n.map(t.indices,(function(t){var i=o.dataToPoint(e.get(s,t));return i[1]=e.get(l,t),i}))})),h=function(e){for(var t=e.length,i=e[0].length,n=[],a=[],o=0,r={},s=0;s<i;++s){for(var l=0,u=0;l<t;++l)u+=e[l][s][1];o<u&&(o=u),n.push(u)}for(var h=0;h<i;++h)a[h]=(o-n[h])/2;for(var c=o=0;c<i;++c){var d=n[c]+a[c];o<d&&(o=d)}return r.y0=a,r.max=o,r}(u),c=h.y0,d=i/h.max,g=r.length,p=r[0].indices.length,f=0;f<p;++f){a=c[f]*d,e.setItemLayout(r[0].indices[f],{layerIndex:0,x:u[0][f][0],y0:a,y:u[0][f][1]*d});for(var v=1;v<g;++v)a+=u[v-1][f][1]*d,e.setItemLayout(r[v].indices[f],{layerIndex:v,x:u[v][f][0],y0:a,y:u[v][f][1]*d})}}e.exports=function(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),i=e.coordinateSystem,n={},r=i.getRect();n.rect=r;var s=e.get("boundaryGap"),l=i.getAxis();n.boundaryGap=s,"horizontal"===l.orient?(s[0]=a.parsePercent(s[0],r.height),s[1]=a.parsePercent(s[1],r.height),o(t,e,r.height-s[0]-s[1])):(s[0]=a.parsePercent(s[0],r.width),s[1]=a.parsePercent(s[1],r.width),o(t,e,r.width-s[0]-s[1])),t.setLayout("layoutInfo",n)}))}},1346:function(e,t,i){var n=i(216).createHashMap;e.exports=function(e){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),i=e.getRawData(),a=e.get("color"),o=n();t.each((function(e){o.set(t.getRawIndex(e),e)})),i.each((function(n){var r=i.getName(n),s=a[(e.nameMap.get(r)-1)%a.length];i.setItemVisual(n,"color",s);var l=o.get(n);null!=l&&t.setItemVisual(l,"color",s)}))}))}},1347:function(e,t,i){var n=i(220),a=i(216);i(1348),i(1349),i(1351);var o=i(662),r=i(1352),s=i(635);n.registerVisual(a.curry(o,"sunburst")),n.registerLayout(a.curry(r,"sunburst")),n.registerProcessor(a.curry(s,"sunburst"))},1348:function(e,t,i){var n=i(216),a=i(272),o=i(719),r=i(600).wrapTreePathInfo,s=a.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e){var t={name:e.name,children:e.data};!function e(t){var i=0;n.each(t.children,(function(t){e(t);var a=t.value;n.isArray(a)&&(a=a[0]),i+=a}));var a=t.value;n.isArray(a)&&(a=a[0]),null!=a&&!isNaN(a)||(a=i),a<0&&(a=0),n.isArray(t.value)?t.value[0]=a:t.value=a}(t);var i=e.levels||[],a={};return a.levels=i,o.createTree(t,this,a).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=a.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=r(i,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});e.exports=s},1349:function(e,t,i){var n=i(216),a=i(368),o=i(1350),r=i(597),s=a.extend({type:"sunburst",init:function(){},render:function(e,t,i,a){var s=this;this.seriesModel=e,this.api=i,this.ecModel=t;var l=e.getData(),u=l.tree.root,h=e.getViewRoot(),c=this.group,d=e.get("renderLabelForZeroData"),g=[];h.eachNode((function(e){g.push(e)}));var p=this._oldChildren||[];if(function(i,a){function s(e){return e.getId()}function h(n,r){!function(i,n){if(d||!i||i.getValue()||(i=null),i!==u&&n!==u)if(n&&n.piece)i?(n.piece.updateData(!1,i,"normal",e,t),l.setItemGraphicEl(i.dataIndex,n.piece)):function(e){e&&e.piece&&(c.remove(e.piece),e.piece=null)}(n);else if(i){var a=new o(i,e,t);c.add(a),l.setItemGraphicEl(i.dataIndex,a)}}(null==n?null:i[n],null==r?null:a[r])}0===i.length&&0===a.length||new r(a,i,s,s).add(h).update(h).remove(n.curry(h,null)).execute()}(g,p),function(i,n){if(0<n.depth){function a(){s._rootToNode(n.parentNode)}s.virtualPiece?s.virtualPiece.updateData(!1,i,"normal",e,t):(s.virtualPiece=new o(i,e,t),c.add(s.virtualPiece)),n.piece._onclickEvent&&n.piece.off("click",n.piece._onclickEvent),n.piece._onclickEvent=a,s.virtualPiece.on("click",a)}else s.virtualPiece&&(c.remove(s.virtualPiece),s.virtualPiece=null)}(u,h),a&&a.highlight&&a.highlight.piece){var f=e.getShallow("highlightPolicy");a.highlight.piece.onEmphasis(f)}else if(a&&a.unhighlight){var v=this.virtualPiece;!v&&u.children.length&&(v=u.children[0].piece),v&&v.onNormal()}this._initEvents(),this._oldChildren=g},dispose:function(){},_initEvents:function(){function e(e){var i=!1;t.seriesModel.getViewRoot().eachNode((function(n){if(!i&&n.piece&&n.piece.childAt(0)===e.target){var a=n.getModel().get("nodeClick");if("rootToNode"===a)t._rootToNode(n);else if("link"===a){var o=n.getModel(),r=o.get("link");if(r){var s=o.get("target",!0)||"_blank";window.open(r,s)}}i=!0}}))}var t=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var i=t.getData().getItemLayout(0);if(i){var n=e[0]-i.cx,a=e[1]-i.cy,o=Math.sqrt(n*n+a*a);return o<=i.r&&o>=i.r0}}});e.exports=s},1350:function(e,t,i){var n=i(216),a=i(222),o="none";function r(e,t,i){a.Group.call(this);var n=new a.Sector({z2:2});n.seriesIndex=t.seriesIndex;var o=new a.Text({z2:4,silent:e.getModel("label").get("silent")});function r(){o.ignore=o.hoverIgnore}function s(){o.ignore=o.normalIgnore}this.add(n),this.add(o),this.updateData(!0,e,"normal",t,i),this.on("emphasis",r).on("normal",s).on("mouseover",r).on("mouseout",s)}var s=r.prototype;s.updateData=function(e,t,i,o,r){(this.node=t).piece=this,o=o||this._seriesModel,r=r||this._ecModel;var s=this.childAt(0);s.dataIndex=t.dataIndex;var l=t.getModel(),u=t.getLayout(),h=n.extend({},u);h.label=null;var c,d,g=function(e,t){var i=e.getVisual("color"),a=e.getVisual("visualMeta");a&&0!==a.length||(i=null);var o=e.getModel("itemStyle").get("color");if(o)return o;if(i)return i;if(0===e.depth)return t.option.color[0];var r=t.option.color.length;return o=t.option.color[function(e){for(var t=e;1<t.depth;)t=t.parentNode;var i=e.getAncestors()[0];return n.indexOf(i.children,t)}(e)%r]}(t,r);c=t,d=g,o.getData().setItemVisual(c.dataIndex,"color",d);var p,f=l.getModel("itemStyle").getItemStyle();if("normal"===i)p=f;else{var v=l.getModel(i+".itemStyle").getItemStyle();p=n.merge(v,f)}p=n.defaults({lineJoin:"bevel",fill:p.fill||g},p),e?(s.setShape(h),s.shape.r=u.r0,a.updateProps(s,{shape:{r:u.r}},o,t.dataIndex),s.useStyle(p)):"object"==typeof p.fill&&p.fill.type||"object"==typeof s.style.fill&&s.style.fill.type?(a.updateProps(s,{shape:h},o),s.useStyle(p)):a.updateProps(s,{shape:h,style:p},o),this._updateLabel(o,g,i);var y=l.getShallow("cursor");if(y&&s.attr("cursor",y),e){var m=o.getShallow("highlightPolicy");this._initEvents(s,t,o,m)}this._seriesModel=o||this._seriesModel,this._ecModel=r||this._ecModel},s.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode((function(i){var n,a,r;i.piece&&(t.node===i?i.piece.updateData(!1,i,"emphasis"):(n=i,a=t.node,(r=e)!==o&&("self"===r?n===a:"ancestor"===r?n===a||n.isAncestorOf(a):n===a||n.isDescendantOf(a))?i.piece.childAt(0).trigger("highlight"):e!==o&&i.piece.childAt(0).trigger("downplay")))}))},s.onNormal=function(){this.node.hostTree.root.eachNode((function(e){e.piece&&e.piece.updateData(!1,e,"normal")}))},s.onHighlight=function(){this.updateData(!1,this.node,"highlight")},s.onDownplay=function(){this.updateData(!1,this.node,"downplay")},s._updateLabel=function(e,t,i){var o=this.node.getModel(),r=o.getModel("label"),s="normal"===i||"emphasis"===i?r:o.getModel(i+".label"),l=o.getModel("emphasis.label"),u=n.retrieve(e.getFormattedLabel(this.node.dataIndex,i,null,null,"label"),this.node.name);!1===A("show")&&(u="");var h=this.node.getLayout(),c=s.get("minAngle");null==c&&(c=r.get("minAngle")),c=c/180*Math.PI;var d=h.endAngle-h.startAngle;null!=c&&Math.abs(d)<c&&(u="");var g=this.childAt(1);a.setLabelStyle(g.style,g.hoverStyle||{},r,l,{defaultText:s.getShallow("show")?u:null,autoColor:t,useInsideStyle:!0});var p,f=(h.startAngle+h.endAngle)/2,v=Math.cos(f),y=Math.sin(f),m=A("position"),w=A("distance")||0,x=A("align");"outside"===m?(p=h.r+w,x=f>Math.PI/2?"right":"left"):x&&"center"!==x?"left"===x?(p=h.r0+w,f>Math.PI/2&&(x="right")):"right"===x&&(p=h.r-w,f>Math.PI/2&&(x="left")):(p=(h.r+h.r0)/2,x="center"),g.attr("style",{text:u,textAlign:x,textVerticalAlign:A("verticalAlign")||"middle",opacity:A("opacity")});var I=p*v+h.cx,b=p*y+h.cy;g.attr("position",[I,b]);var M=A("rotate"),P=0;function A(e){var t=s.get(e);return null==t?r.get(e):t}"radial"===M?(P=-f)<-Math.PI/2&&(P+=Math.PI):"tangential"===M?(P=Math.PI/2-f)>Math.PI/2?P-=Math.PI:P<-Math.PI/2&&(P+=Math.PI):"number"==typeof M&&(P=M*Math.PI/180),g.attr("rotation",P)},s._initEvents=function(e,t,i,n){function a(){r.onEmphasis(n)}function o(){r.onNormal()}e.off("mouseover").off("mouseout").off("emphasis").off("normal");var r=this;i.isAnimationEnabled()&&e.on("mouseover",a).on("mouseout",o).on("emphasis",a).on("normal",o).on("downplay",(function(){r.onDownplay()})).on("highlight",(function(){r.onHighlight()}))},n.inherits(r,a.Group);var l=r;e.exports=l},1351:function(e,t,i){var n=i(220),a=i(600),o="sunburstRootToNode";n.registerAction({type:o,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,i){var n=a.retrieveTargetInfo(e,[o],t);if(n){var r=t.getViewRoot();r&&(e.direction=a.aboveViewRoot(r,n.node)?"rollUp":"drillDown"),t.resetViewRoot(n.node)}}))}));var r="sunburstHighlight";n.registerAction({type:r,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,i){var n=a.retrieveTargetInfo(e,[r],t);n&&(e.highlight=n.node)}))})),n.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,i){e.unhighlight=!0}))}))},1352:function(e,t,i){var n=i(224).parsePercent,a=i(216),o=Math.PI/180;e.exports=function(e,t,i,r){t.eachSeriesByType(e,(function(e){var t=e.get("center"),r=e.get("radius");a.isArray(r)||(r=[0,r]),a.isArray(t)||(t=[t,t]);var s=i.getWidth(),l=i.getHeight(),u=Math.min(s,l),h=n(t[0],s),c=n(t[1],l),d=n(r[0],u/2),g=n(r[1],u/2),p=-e.get("startAngle")*o,f=e.get("minAngle")*o,v=e.getData().tree.root,y=e.getViewRoot(),m=y.depth,w=e.get("sort");null!=w&&function e(t,i){var n=t.children||[];t.children=function(e,t){if("function"==typeof t)return e.sort(t);var i="asc"===t;return e.sort((function(e,t){var n=(e.getValue()-t.getValue())*(i?1:-1);return 0==n?(e.dataIndex-t.dataIndex)*(i?-1:1):n}))}(n,i),n.length&&a.each(t.children,(function(t){e(t,i)}))}(y,w);var x=0;a.each(y.children,(function(e){isNaN(e.getValue())||x++}));var I=y.getValue(),b=Math.PI/(I||x)*2,M=0<y.depth,P=y.height-(M?-1:1),A=(g-d)/(P||1),D=e.get("clockwise"),S=e.get("stillShowZeroSum"),_=D?1:-1;if(M){var T=d,V=d+A,L=2*Math.PI;v.setLayout({angle:L,startAngle:p,endAngle:p+L,clockwise:D,cx:h,cy:c,r0:T,r:V})}!function e(t,i){if(t){var o=i;if(t!==v){var r=t.getValue(),s=0===I&&S?b:r*b;s<f&&(s=f),o=i+_*s;var l=t.depth-m-(M?-1:1),g=d+A*l,p=d+A*(1+l),y=t.getModel();null!=y.get("r0")&&(g=n(y.get("r0"),u/2)),null!=y.get("r")&&(p=n(y.get("r"),u/2)),t.setLayout({angle:s,startAngle:i,endAngle:o,clockwise:D,cx:h,cy:c,r0:g,r:p})}if(t.children&&t.children.length){var w=0;a.each(t.children,(function(t){w+=e(t,i+w)}))}return o-i}}(y,p)}))}}}]);