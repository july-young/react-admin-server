(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[33],{1222:function(e,t,a){var o=a(220);a(1223),a(1224);var n=a(598),i=a(632);a(633),o.registerVisual(n("scatter","circle")),o.registerLayout(i("scatter"))},1223:function(e,t,a){var o=a(479),n=a(272).extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(){return o(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});e.exports=n},1224:function(e,t,a){var o=a(220),n=a(630),i=a(1225),r=a(632);o.extendChartView({type:"scatter",render:function(e){var t=e.getData();this._updateSymbolDraw(t,e).updateData(t,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e){var t=e.getData();this._updateSymbolDraw(t,e).incrementalPrepareUpdate(t),this._finished=!1},incrementalRender:function(e,t){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e){var t=e.getData();if(this.group.dirty(),!this._finished||1e4<t.count()||!this._symbolDraw.isPersistent())return{update:!0};var a=r().reset(e);a.progress&&a.progress({start:0,end:t.count()},t),this._symbolDraw.updateLayout(t)},_getClipShape:function(e){var t=e.coordinateSystem,a=t&&t.getArea&&t.getArea();return e.get("clip",!0)?a:null},_updateSymbolDraw:function(e,t){var a=this._symbolDraw,o=t.pipelineContext.large;return a&&o===this._isLargeDraw||(a&&a.remove(),a=this._symbolDraw=new(o?i:n),this._isLargeDraw=o,this.group.removeAll()),this.group.add(a.group),a},remove:function(){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}})},1299:function(e,t,a){var o=a(220);a(1300),a(1301),a(1302);var n=a(1303),i=a(1304);o.registerLayout(n),o.registerVisual(i)},1300:function(e,t,a){var o=a(272),n=a(852),i=a(247).encodeHTML,r=a(263),s=(a(232).__DEV__,o.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var a=e.edges||e.links,o=e.data||e.nodes,i=e.levels,s=this.levelModels={},u=0;u<i.length;u++)null!=i[u].depth&&0<=i[u].depth&&(s[i[u].depth]=new r(i[u],this,t));if(o&&a)return n(o,a,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){return e.customizeGetParent((function(e){var a=this.parentModel,o=a.getData().getItemLayout(t).depth;return a.levelModels[o]||this.parentModel})),e})),t.wrapMethod("getItemModel",(function(e,t){return e.customizeGetParent((function(e){var a=this.parentModel,o=a.getGraph().getEdgeByIndex(t).node1.getLayout().depth;return a.levelModels[o]||this.parentModel})),e}))})).data},setNodePosition:function(e,t){var a=this.option.data[e];a.localX=t[0],a.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,a){if("edge"===a){var o=this.getDataParams(e,a),n=o.data,r=n.source+" -- "+n.target;return o.value&&(r+=" : "+o.value),i(r)}if("node"!==a)return s.superCall(this,"formatTooltip",e,t);var u=this.getGraph().getNodeByIndex(e).getLayout().value,l=this.getDataParams(e,a).data.name;return u&&(r=l+" : "+u),i(r)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}})),u=s;e.exports=u},1301:function(e,t,a){var o=a(222),n=a(220),i=a(216),r=["itemStyle","opacity"],s=["lineStyle","opacity"];function u(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function l(e,t,a){var o=e.getGraphicEl(),n=u(e,t);null!=a&&(null==n&&(n=1),n*=a),o.downplay&&o.downplay(),o.traverse((function(e){"group"!==e.type&&e.setStyle("opacity",n)}))}function c(e,t){var a=u(e,t),o=e.getGraphicEl();o.highlight&&o.highlight(),o.traverse((function(e){"group"!==e.type&&e.setStyle("opacity",a)}))}var d=o.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var a=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+a,t.y2),e.bezierCurveTo(t.cpx2+a,t.cpy2,t.cpx1+a,t.cpy1,t.x1+a,t.y1)):(e.lineTo(t.x2,t.y2+a),e.bezierCurveTo(t.cpx2,t.cpy2+a,t.cpx1,t.cpy1+a,t.x1,t.y1+a)),e.closePath()}}),g=n.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,a){var n,i,r,s,u=this,l=e.getGraph(),c=this.group,g=e.layoutInfo,h=g.width,y=g.height,f=e.getData(),p=e.getData("edge"),v=e.get("orient");this._model=e,c.removeAll(),c.attr("position",[g.x,g.y]),l.eachEdge((function(t){var a=new d;a.dataIndex=t.dataIndex,a.seriesIndex=e.seriesIndex,a.dataType="edge";var n,i,r,s,u,l,g,f,x=t.getModel("lineStyle"),m=x.get("curveness"),L=t.node1.getLayout(),D=t.node1.getModel(),I=D.get("localX"),_=D.get("localY"),w=t.node2.getLayout(),b=t.node2.getModel(),S=b.get("localX"),E=b.get("localY"),T=t.getLayout();switch(a.shape.extent=Math.max(1,T.dy),f="vertical"===(a.shape.orient=v)?(n=(null!=I?I*h:L.x)+T.sy,i=(null!=_?_*y:L.y)+L.dy,r=(null!=S?S*h:w.x)+T.ty,u=n,l=i*(1-m)+(s=null!=E?E*y:w.y)*m,g=r,i*m+s*(1-m)):(n=(null!=I?I*h:L.x)+L.dx,i=(null!=_?_*y:L.y)+T.sy,u=n*(1-m)+(r=null!=S?S*h:w.x)*m,l=i,g=n*m+r*(1-m),s=(null!=E?E*y:w.y)+T.ty),a.setShape({x1:n,y1:i,x2:r,y2:s,cpx1:u,cpy1:l,cpx2:g,cpy2:f}),a.setStyle(x.getItemStyle()),a.style.fill){case"source":a.style.fill=t.node1.getVisual("color");break;case"target":a.style.fill=t.node2.getVisual("color")}o.setHoverStyle(a,t.getModel("emphasis.lineStyle").getItemStyle()),c.add(a),p.setItemGraphicEl(t.dataIndex,a)})),l.eachNode((function(t){var a=t.getLayout(),n=t.getModel(),i=n.get("localX"),r=n.get("localY"),s=n.getModel("label"),u=n.getModel("emphasis.label"),l=new o.Rect({shape:{x:null!=i?i*h:a.x,y:null!=r?r*y:a.y,width:a.dx,height:a.dy},style:n.getModel("itemStyle").getItemStyle()}),d=t.getModel("emphasis.itemStyle").getItemStyle();o.setLabelStyle(l.style,d,s,u,{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id,isRectText:!0}),l.setStyle("fill",t.getVisual("color")),o.setHoverStyle(l,d),c.add(l),f.setItemGraphicEl(t.dataIndex,l),l.dataType="node"})),f.eachItemGraphicEl((function(t,o){var n=f.getItemModel(o);n.get("draggable")&&(t.drift=function(t,n){u._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=n,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:f.getRawIndex(o),localX:this.shape.x/h,localY:this.shape.y/y})},t.ondragend=function(){u._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move"),n.get("focusNodeAdjacency")&&(t.off("mouseover").on("mouseover",(function(){u._focusAdjacencyDisabled||(u._clearTimer(),a.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:t.dataIndex}))})),t.off("mouseout").on("mouseout",(function(){u._focusAdjacencyDisabled||u._dispatchUnfocus(a)})))})),p.eachItemGraphicEl((function(t,o){p.getItemModel(o).get("focusNodeAdjacency")&&(t.off("mouseover").on("mouseover",(function(){u._focusAdjacencyDisabled||(u._clearTimer(),a.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:t.dataIndex}))})),t.off("mouseout").on("mouseout",(function(){u._focusAdjacencyDisabled||u._dispatchUnfocus(a)})))})),!this._data&&e.get("animation")&&c.setClipPath((n=c.getBoundingRect(),i=e,r=function(){c.removeClipPath()},s=new o.Rect({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}}),o.initProps(s,{shape:{width:n.width+20,height:n.height+20}},i,r),s)),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout((function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})}),500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,a,o){var n=this._model.getData(),u=n.graph,d=o.dataIndex,g=n.getItemModel(d),h=o.edgeDataIndex;if(null!=d||null!=h){var y=u.getNodeByIndex(d),f=u.getEdgeByIndex(h);if(u.eachNode((function(e){l(e,r,.1)})),u.eachEdge((function(e){l(e,s,.1)})),y){c(y,r);var p=g.get("focusNodeAdjacency");"outEdges"===p?i.each(y.outEdges,(function(e){e.dataIndex<0||(c(e,s),c(e.node2,r))})):"inEdges"===p?i.each(y.inEdges,(function(e){e.dataIndex<0||(c(e,s),c(e.node1,r))})):"allEdges"===p&&i.each(y.edges,(function(e){e.dataIndex<0||(c(e,s),c(e.node1,r),c(e.node2,r))}))}f&&(c(f,s),c(f.node1,r),c(f.node2,r))}},unfocusNodeAdjacency:function(){var e=this._model.getGraph();e.eachNode((function(e){l(e,r)})),e.eachEdge((function(e){l(e,s)}))}});e.exports=g},1302:function(e,t,a){var o=a(220);a(853),o.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))},1303:function(e,t,a){var o=a(240),n=a(216),i=a(228).groupData;function r(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&0<=t.depth}function s(e,t,a,o,i){var r="vertical"===i?"x":"y";n.each(e,(function(e){var n,s,u;e.sort((function(e,t){return e.getLayout()[r]-t.getLayout()[r]}));for(var l=0,c=e.length,d="vertical"===i?"dx":"dy",g=0;g<c;g++)0<(u=l-(s=e[g]).getLayout()[r])&&(n=s.getLayout()[r]+u,"vertical"===i?s.setLayout({x:n},!0):s.setLayout({y:n},!0)),l=s.getLayout()[r]+s.getLayout()[d]+t;if(0<(u=l-t-("vertical"===i?o:a)))for(n=s.getLayout()[r]-u,"vertical"===i?s.setLayout({x:n},!0):s.setLayout({y:n},!0),l=n,g=c-2;0<=g;--g)0<(u=(s=e[g]).getLayout()[r]+s.getLayout()[d]+t-l)&&(n=s.getLayout()[r]-u,"vertical"===i?s.setLayout({x:n},!0):s.setLayout({y:n},!0)),l=s.getLayout()[r]}))}function u(e,t,a){n.each(e.slice().reverse(),(function(e){n.each(e,(function(e){if(e.outEdges.length){var o=h(e.outEdges,l,a)/h(e.outEdges,g,a);if("vertical"===a){var n=e.getLayout().x+(o-d(e,a))*t;e.setLayout({x:n},!0)}else{var i=e.getLayout().y+(o-d(e,a))*t;e.setLayout({y:i},!0)}}}))}))}function l(e,t){return d(e.node2,t)*e.getValue()}function c(e,t){return d(e.node1,t)*e.getValue()}function d(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function g(e){return e.getValue()}function h(e,t,a){for(var o=0,n=e.length,i=-1;++i<n;){var r=+t.call(e,e[i],a);isNaN(r)||(o+=r)}return o}function y(e,t,a){n.each(e,(function(e){n.each(e,(function(e){if(e.inEdges.length){var o=h(e.inEdges,c,a)/h(e.inEdges,g,a);if("vertical"===a){var n=e.getLayout().x+(o-d(e,a))*t;e.setLayout({x:n},!0)}else{var i=e.getLayout().y+(o-d(e,a))*t;e.setLayout({y:i},!0)}}}))}))}e.exports=function(e,t,a){e.eachSeriesByType("sankey",(function(e){var a,l,c,d,f,p,v,x,m,L,D=e.get("nodeWidth"),I=e.get("nodeGap"),_=(a=e,l=t,o.getLayoutRect(a.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})),w=(e.layoutInfo=_).width,b=_.height,S=e.getGraph(),E=S.nodes,T=S.edges;c=E,n.each(c,(function(e){var t=h(e.outEdges,g),a=h(e.inEdges,g),o=Math.max(t,a);e.setLayout({value:o},!0)})),p=I,m=0!==n.filter(E,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),function(e,t,a,o,i,s,u){for(var l=[],c=[],d=[],g=[],h=0,y=0;y<t.length;y++)l[y]=1;for(y=0;y<e.length;y++)c[y]=e[y].inEdges.length,0===c[y]&&d.push(e[y]);for(var f=-1;d.length;){for(var p=0;p<d.length;p++){var v=d[p],x=v.hostGraph.data.getRawDataItem(v.dataIndex),m=null!=x.depth&&0<=x.depth;m&&x.depth>f&&(f=x.depth),v.setLayout({depth:m?x.depth:h},!0),"vertical"===s?v.setLayout({dy:a},!0):v.setLayout({dx:a},!0);for(var L=0;L<v.outEdges.length;L++){var D=v.outEdges[L];l[t.indexOf(D)]=0;var I=D.node2;0==--c[e.indexOf(I)]&&g.indexOf(I)<0&&g.push(I)}}++h,d=g,g=[]}for(y=0;y<l.length;y++)if(1===l[y])throw new Error("Sankey is a DAG, the original data has cycle!");var _=h-1<f?f:h-1;u&&"left"!==u&&function(e,t,a){if("right"===t){for(var o=[],i=e,s=0;i.length;){for(var u=0;u<i.length;u++){var l=i[u];l.setLayout({skNodeHeight:s},!0);for(var c=0;c<l.inEdges.length;c++){var d=l.inEdges[c];o.indexOf(d.node1)<0&&o.push(d.node1)}}i=o,o=[],++s}n.each(e,(function(e){r(e)||e.setLayout({depth:Math.max(0,a-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){n.each(e,(function(e){r(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,a)}(e,u,_),function(e,t,a){n.each(e,(function(e){var o=e.getLayout().depth*t;"vertical"===a?e.setLayout({y:o},!0):e.setLayout({x:o},!0)}))}(e,"vertical"===s?(i-a)/_:(o-a)/_,s)}(d=E,f=T,D,v=w,x=b,L=e.get("orient"),e.get("nodeAlign")),function(e,t,a,o,r,l,c){var d=function(e,t){var a=[],o="vertical"===t?"y":"x",r=i(e,(function(e){return e.getLayout()[o]}));return r.keys.sort((function(e,t){return e-t})),n.each(r.keys,(function(e){a.push(r.buckets.get(e))})),a}(e,c);(function(e,t,a,o,i,r){var s=1/0;n.each(e,(function(e){var t=e.length,u=0;n.each(e,(function(e){u+=e.getLayout().value}));var l="vertical"===r?(o-(t-1)*i)/u:(a-(t-1)*i)/u;l<s&&(s=l)})),n.each(e,(function(e){n.each(e,(function(e,t){var a=e.getLayout().value*s;"vertical"===r?(e.setLayout({x:t},!0),e.setLayout({dx:a},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:a},!0))}))})),n.each(t,(function(e){var t=e.getValue()*s;e.setLayout({dy:t},!0)}))})(d,t,a,o,r,c),s(d,r,a,o,c);for(var g=1;0<l;l--)u(d,g*=.99,c),s(d,r,a,o,c),y(d,g,c),s(d,r,a,o,c)}(d,f,x,v,p,m,L),function(e,t){var a="vertical"===t?"x":"y";n.each(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[a]-t.node2.getLayout()[a]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[a]-t.node1.getLayout()[a]}))})),n.each(e,(function(e){var t=0,a=0;n.each(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),n.each(e.inEdges,(function(e){e.setLayout({ty:a},!0),a+=e.getLayout().dy}))}))}(d,L)}))}},1304:function(e,t,a){var o=a(601),n=a(216);e.exports=function(e,t){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph().nodes;if(t.length){var a=1/0,i=-1/0;n.each(t,(function(e){var t=e.getLayout().value;t<a&&(a=t),i<t&&(i=t)})),n.each(t,(function(t){var n=new o({type:"color",mappingMethod:"linear",dataExtent:[a,i],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),r=t.getModel().get("itemStyle.color");null!=r?t.setVisual("color",r):t.setVisual("color",n)}))}}))}}}]);