{"version":3,"sources":["pages/login/login.tsx","pages/home/line.tsx","pages/home/bar.tsx","pages/home/home.tsx","pages/role/add-form.tsx","pages/role/auth-form.tsx","utils/dateUtils.js","models/role.ts","pages/role/role.tsx","components/link-button/index.tsx","pages/user/user-form.tsx","pages/user/user.tsx","components/header/index.tsx","pages/category/add-form.tsx","pages/category/update-form.tsx","converter/converter2Category.js","pages/category/category.tsx","models/product.ts","utils/memoryUtils.ts","converter/converter2Product.js","pages/product/home.tsx","pages/product/pictures-wall.tsx","pages/product/rich-text-editor.tsx","pages/product/add-update.tsx","pages/product/detail.tsx","pages/product/product.tsx","components/left-nav/index.tsx","pages/charts/bar.tsx","pages/charts/line.tsx","pages/charts/pie.tsx","pages/not-found/not-found.tsx","pages/admin/admin.tsx","App.tsx","serviceWorker.ts","redux/reducer.js","redux/store.js","index.tsx","utils/storageUtils.ts","converter/converter2Menu.js","api/ajax.js","api/index.js","assets/images/logo.png","converter/converter2User.js","converter/converter2Role.js","utils/constants.ts","service/MenuService.ts","redux/actions.js","redux/action-types.js"],"names":["Redirect","require","login","connect","Item","WrapLogin","create","props","user","_id","to","getFieldDecorator","form","errorMsg","className","src","logo","alt","onSubmit","event","preventDefault","validateFields","err","values","a","async","console","log","username","password","rules","required","whitespace","message","min","max","pattern","initialValue","prefix","type","style","color","placeholder","validator","rule","value","callback","length","test","htmlType","state","DataSet","Line","data","month","b","c","dv","createView","source","transform","fields","key","float","width","height","scale","range","forceFit","name","label","formatter","val","crosshairs","position","size","shape","stroke","lineWidth","Bar","year","sales","marginLeft","tickInterval","RangePicker","React","useState","visited","setVisited","title","extra","headStyle","suffix","fontWeight","valueStyle","fontSize","onClick","e","defaultValue","moment","format","bodyStyle","padding","useEffect","setForm","labelCol","span","wrapperCol","TreeNode","checkedKeys","setCheckedKeys","Array","treeNodes","setTreeNodes","initMenusTree","initCheckedKeys","role","reqMenuTree","status","tree","map","x","converter2Menu","getTreeNodes","reqMenus","menus","id","menuList","reduce","pre","item","push","children","disabled","checkable","defaultExpandAll","onCheck","setUpdateMenuKeys","formateDate","time","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","RoleModel","authTime","authUser","logout","roles","setRoles","setRole","updateMenuKeys","isShowAdd","setIsShowAdd","isShowAuth","setIsShowAuth","columns","setColumns","total","setTotal","getRoles","reqRoles","result","list","converter2Role","dataIndex","render","gmtCreate","gmtAuth","bordered","rowKey","dataSource","pagination","defaultPageSize","PAGE_SIZE","rowSelection","selectedRowKeys","onSelect","onRow","visible","onOk","error","roleName","resetFields","reqAddRole","success","onCancel","reqUpdateRole","indexOf","LinkButton","Option","initRoleoptions","phone","email","mode","User","setUser","users","setUsers","isShow","setIsShow","current","pageSize","setPagination","showUpdate","deleteUser","confirm","reqDeleteUser","getUsers","reqUsers","converter2User","parseInt","onChange","userForm","getFieldsValue","reqUpdateUser","reqAddUser","withRouter","reqMenuList","setHeadTitle","now","currentTime","setCurrentTime","wendu","quality","weather","setWeather","intervalId","setIntervalId","reqWeather","getWeather","location","pathname","getTitle","path","every","find","cItem","interId","setInterval","cur","getTime","clearInterval","headTitle","content","categorys","parentId","categoryName","category","converter2Category","categoryVo","initColumns","getCategorys","showStatus","setShowStatus","setCategory","loading","setLoading","setParentId","parentName","setParentName","setCategorys","subCategorys","setSubCategorys","showSubCategorys","pId","reqCategorys","cate","handleCancel","marginRight","showQuickJumper","reqAddCategory","categoryId","reqUpdateCategory","ProductModel","desc","price","detail","imgs","pCategoryId","product","productVo","description","ProductHome","pageNum","setPageNum","products","setProducts","searchName","setSearchName","searchType","setSearchType","showDetail","prodcut","memoryUtils","history","getProducts","reqSearchProducts","reqProducts","converter2Product","updateStatus","productId","reqUpdateStatus","newStatus","margin","target","PicturesWall","previewVisible","setPreviewVisible","previewImage","setPreviewImage","useContext","ProductContext","imgsRec","dispatch","fileList","setFileList","items","img","index","uid","url","BASE_IMG_URL","uploadButton","accept","method","listType","onPreview","file","thumbUrl","fileName","replace","reqDeleteImg","payload","customRequest","option","formData","FormData","append","uploadImg","msg","fl","footer","EditorState","convertToRaw","ContentState","Editor","draftToHtml","htmlToDraft","RichTextEditor","memo","detailRec","createEmpty","editorState","setEditorState","html","contentBlock","default","contentState","createFromBlockArray","contentBlocks","createWithContent","getDetail","useCallback","getCurrentContent","editorStyle","border","minHeight","paddingLeft","onEditorStateChange","productReceived","toolbar","image","uploadCallback","Promise","resolve","reject","xhr","XMLHttpRequest","open","send","addEventListener","JSON","parse","responseText","link","present","mandatory","TextArea","options","setOptions","setProduct","categoryIds","setCategoryIds","isUpdate","setIsUpdate","oppholder","useRef","slice","lastIndexOf","getProduct","initOptions","isLeaf","childOptions","targetOption","productConverter","initCategoryOptions","productChosen","reqCategoryParents","reqCategoryTree","result2","cats","opts","convert2Option","i","res","reqProduct","goBack","autosize","minRows","maxRows","addonAfter","ref","loadData","selectedOptions","prod","reqUpdateProduct","reqAddProduct","ProductDetail","cName1","setCName1","cName2","setCName2","init","reqCategory","all","results","dangerouslySetInnerHTML","__html","Switch","Route","ProductState","createContext","ProductReducer","action","Error","Product","useReducer","Provider","component","exact","ProductAddUpdate","Link","SubMenu","menuNodes","setMenuNodes","openKey","setOpenKey","getMenuNodes","isPublic","child","hasAuth","icon","theme","selectedKeys","defaultOpenKeys","setSales","stores","setStores","sale","store","text","tooltip","legend","xAxis","yAxis","series","getOption","Pie","subtext","trigger","orient","left","radius","center","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","backgroundColor","top","textStyle","visualMap","show","inRange","colorLightness","sort","roseType","normal","labelLine","lineStyle","smooth","length2","animationType","animationEasing","animationDelay","idx","Math","random","Footer","Sider","Content","from","Home","Category","Role","NotFound","textAlign","HashRouter","Login","Admin","Boolean","window","hostname","match","initUser","storageUtils","getUser","combineReducers","SET_HEAD_TITLE","RECEIVE_USER","SHOW_ERROR_MSG","RESET_USER","reload","REQ_MENU_LIST","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","saveUser","set","get","removeUser","remove","menuVo","menu","hasPub","ajax","axios","params","FORM_REQ","headers","MUTI_REQ","post","put","response","catch","reqLogin","roleId","menuKeys","permissionKeys","page","userId","cityId","module","exports","userVo","roleNames","join","y","roleVo","permissions","authUserName","MenuService","menuService","receiveUser","showErrorMsg"],"mappings":"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","file":"static/js/main.214041df.chunk.js","sourcesContent":["import React from 'react';\r\nimport {\r\n    Form,\r\n    Icon,\r\n    Input,\r\n    Button,\r\n} from 'antd';\r\n\r\nimport './login.less'\r\nimport logo from '../../assets/images/logo.png'\r\nimport User from '../../models/user';\r\nimport { FormComponentProps } from 'antd/lib/form'\r\n\r\nconst { Redirect } = require('react-router-dom')\r\nconst { login } = require('../../redux/actions')\r\nconst { connect } = require('react-redux')\r\n\r\ninterface FormTypes extends FormComponentProps {\r\n    login(username: string, password: string): any,\r\n    user?: User,\r\n    errorMsg?:string\r\n}\r\n\r\nconst Item = Form.Item // 不能写在import之前\r\n\r\n\r\n/*\r\n登陆的路由组件\r\n */\r\nconst Login = (props: FormTypes) => {\r\n\r\n    const handleSubmit = (event: React.FormEvent) => {\r\n\r\n        // 阻止事件的默认行为\r\n        event.preventDefault()\r\n\r\n        // 对所有表单字段进行检验\r\n        props.form.validateFields(async (err: boolean, values: any) => {\r\n            // 检验成功\r\n            if (!err) {\r\n                // console.log('提交登陆的ajax请求', values)\r\n                // 请求登陆\r\n                const { username, password } = values\r\n\r\n                // 调用分发异步action的函数 => 发登陆的异步请求, 有了结果后更新状态\r\n                props.login(username, password)\r\n\r\n            } else {\r\n                console.log('检验失败!')\r\n            }\r\n        });\r\n\r\n        // 得到form对象\r\n        // const form = this.props.form\r\n        // // 获取表单项的输入数据\r\n        // const values = form.getFieldsValue()\r\n        // console.log('handleSubmit()', values)\r\n    }\r\n\r\n    /*\r\n    对密码进行自定义验证\r\n    */\r\n    /*\r\n     用户名/密码的的合法性要求\r\n       1). 必须输入\r\n       2). 必须大于等于4位\r\n       3). 必须小于等于12位\r\n       4). 必须是英文、数字或下划线组成\r\n      */\r\n    const validatePwd = (rule: any, value: string, callback: Function) => {\r\n        console.log('validatePwd()', rule, value)\r\n        if (!value) {\r\n            callback('密码必须输入')\r\n        } else if (value.length < 4) {\r\n            callback('密码长度不能小于4位')\r\n        } else if (value.length > 12) {\r\n            callback('密码长度不能大于12位')\r\n        } else if (!/^[a-zA-Z0-9_]+$/.test(value)) {\r\n            callback('密码必须是英文、数字或下划线组成')\r\n        } else {\r\n            callback() // 验证通过\r\n        }\r\n        // callback('xxxx') // 验证失败, 并指定提示的文本\r\n    }\r\n\r\n\r\n    // 如果用户已经登陆, 自动跳转到管理界面\r\n    const user = props.user\r\n    if (user && user._id) {\r\n        return <Redirect to='/home' />\r\n    }\r\n\r\n    // 得到具强大功能的form对象\r\n    const form = props.form\r\n    const { getFieldDecorator } = form;\r\n\r\n    const errorMsg = props.errorMsg;\r\n    return (\r\n        <div className=\"login\">\r\n            <header className=\"login-header\">\r\n                <img src={logo} alt=\"logo\" />\r\n                <h1>React项目: 后台管理系统</h1>\r\n            </header>\r\n            <section className=\"login-content\">\r\n                <div className={errorMsg ? 'error-msg show' : 'error-msg'}>{errorMsg}</div>\r\n                <h2>用户登陆</h2>\r\n                <Form onSubmit={handleSubmit} className=\"login-form\">\r\n                    <Item>\r\n                        {\r\n                            /*\r\n                          用户名/密码的的合法性要求\r\n                            1). 必须输入\r\n                            2). 必须大于等于4位\r\n                            3). 必须小于等于12位\r\n                            4). 必须是英文、数字或下划线组成\r\n                           */\r\n                        }\r\n                        {\r\n                            getFieldDecorator('username', { // 配置对象: 属性名是特定的一些名称\r\n                                // 声明式验证: 直接使用别人定义好的验证规则进行验证\r\n                                rules: [\r\n                                    { required: true, whitespace: true, message: '用户名必须输入' },\r\n                                    { min: 4, message: '用户名至少4位' },\r\n                                    { max: 12, message: '用户名最多12位' },\r\n                                    { pattern: /^[a-zA-Z0-9_]+$/, message: '用户名必须是英文、数字或下划线组成' },\r\n                                ],\r\n                                initialValue: 'admin', // 初始值\r\n                            })(\r\n                                <Input\r\n                                    prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                    placeholder=\"用户名\"\r\n                                />\r\n                            )\r\n                        }\r\n                    </Item>\r\n                    <Form.Item>\r\n                        {\r\n                            getFieldDecorator('password', {\r\n                                rules: [\r\n                                    {\r\n                                        validator: validatePwd\r\n                                    }\r\n                                ]\r\n                            })(\r\n                                <Input\r\n                                    prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                                    type=\"password\"\r\n                                    placeholder=\"密码\"\r\n                                />\r\n                            )\r\n                        }\r\n\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                            登陆\r\n              </Button>\r\n                    </Form.Item>\r\n                </Form>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n\r\n/*\r\n1. 高阶函数\r\n    1). 一类特别的函数\r\n        a. 接受函数类型的参数\r\n        b. 返回值是函数\r\n    2). 常见\r\n        a. 定时器: setTimeout()/setInterval()\r\n        b. Promise: Promise(() => {}) then(value => {}, reason => {})\r\n        c. 数组遍历相关的方法: forEach()/filter()/map()/reduce()/find()/findIndex()\r\n        d. 函数对象的bind()\r\n        e. Form.create()() / getFieldDecorator()()\r\n    3). 高阶函数更新动态, 更加具有扩展性\r\n\r\n2. 高阶组件\r\n    1). 本质就是一个函数\r\n    2). 接收一个组件(被包装组件), 返回一个新的组件(包装组件), 包装组件会向被包装组件传入特定属性\r\n    3). 作用: 扩展组件的功能\r\n    4). 高阶组件也是高阶函数: 接收一个组件函数, 返回是一个新的组件函数\r\n */\r\n/*\r\n包装Form组件生成一个新的组件: Form(Login)\r\n新组件会向Form组件传递一个强大的对象属性: form\r\n */\r\nconst WrapLogin = Form.create()(Login)\r\nexport default connect(\r\n    (    state: { user: User }) => ({ user: state.user }),\r\n    { login }\r\n)(WrapLogin)\r\n\r\n\r\n/*\r\n1. 前台表单验证\r\n2. 收集表单输入数据\r\n */\r\n\r\n/*\r\nasync和await\r\n1. 作用?\r\n   简化promise对象的使用: 不用再使用then()来指定成功/失败的回调函数\r\n   以同步编码(没有回调函数了)方式实现异步流程\r\n2. 哪里写await?\r\n    在返回promise的表达式左侧写await: 不想要promise, 想要promise异步执行的成功的value数据\r\n3. 哪里写async?\r\n    await所在函数(最近的)定义的左侧写async\r\n */","import React from \"react\"\r\nimport {\r\n    Chart,\r\n    Geom,\r\n    Axis,\r\n    Tooltip,\r\n    Legend,\r\n} from \"bizcharts\"\r\nconst DataSet =require(\"@antv/data-set\") \r\n\r\ninterface LineTypes {\r\n    month: string,\r\n    a: Number,\r\n    b: Number,\r\n    c: Number\r\n}\r\nconst Line = (data:Array<LineTypes>) => {\r\n    data = [\r\n        {\r\n            month: \"Jan\",\r\n            a: 7.0,\r\n            b: 3.9,\r\n            c: 5.9\r\n        },\r\n        {\r\n            month: \"Feb\",\r\n            a: 6.9,\r\n            b: 4.2,\r\n            c: 1.9\r\n        },\r\n        {\r\n            month: \"Mar\",\r\n            a: 9.5,\r\n            b: 5.7,\r\n            c: 3.9\r\n        },\r\n        {\r\n            month: \"Apr\",\r\n            a: 14.5,\r\n            b: 8.5,\r\n            c: 5.5\r\n        },\r\n        {\r\n            month: \"May\",\r\n            a: 18.4,\r\n            b: 11.9,\r\n            c: 8.9\r\n        },\r\n        {\r\n            month: \"Jun\",\r\n            a: 21.5,\r\n            b: 15.2,\r\n            c: 10.0\r\n        },\r\n        {\r\n            month: \"Jul\",\r\n            a: 25.2,\r\n            b: 17.0,\r\n            c: 12.9\r\n        },\r\n        {\r\n            month: \"Aug\",\r\n            a: 26.5,\r\n            b: 16.6,\r\n            c: 15.9\r\n        },\r\n        {\r\n            month: \"Sep\",\r\n            a: 23.3,\r\n            b: 14.2,\r\n            c: 20.7\r\n        },\r\n        {\r\n            month: \"Oct\",\r\n            a: 18.3,\r\n            b: 10.3,\r\n            c: 25.9\r\n        },\r\n        {\r\n            month: \"Nov\",\r\n            a: 13.9,\r\n            b: 6.6,\r\n            c: 30.9\r\n        },\r\n        {\r\n            month: \"Dec\",\r\n            a: 9.6,\r\n            b: 4.8,\r\n            c: 35.9\r\n        }\r\n    ]\r\n    const ds = new DataSet()\r\n    const dv = ds.createView().source(data)\r\n    dv.transform({\r\n        type: \"fold\",\r\n        fields: [\"a\", \"b\", \"c\"],\r\n        // 展开字段集\r\n        key: \"city\",\r\n        // key字段\r\n        value: \"temperature\" // value字段\r\n    })\r\n    const cols = {\r\n        month: {\r\n            range: [0, 1]\r\n        }\r\n    }\r\n    return (\r\n        <div style={{ float: 'right', width: 750, height: 300 }}>\r\n            <Chart height={250} data={dv} scale={cols} forceFit>\r\n                <Legend />\r\n                <Axis name=\"month\" />\r\n                <Axis\r\n                    name=\"temperature\"\r\n                    label={{\r\n                        formatter: val => `${val}万个`\r\n                    }}\r\n                />\r\n                <Tooltip\r\n                    crosshairs={{\r\n                        type: \"y\"\r\n                    }}\r\n                />\r\n                <Geom\r\n                    type=\"line\"\r\n                    position=\"month*temperature\"\r\n                    size={2}\r\n                    color={\"city\"}\r\n                    shape={\"smooth\"}\r\n                />\r\n                <Geom\r\n                    type=\"point\"\r\n                    position=\"month*temperature\"\r\n                    size={4}\r\n                    shape={\"circle\"}\r\n                    color={\"city\"}\r\n                    style={{\r\n                        stroke: \"#fff\",\r\n                        lineWidth: 1\r\n                    }}\r\n                />\r\n            </Chart>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Line;","import React from \"react\"\r\nimport {\r\n  Chart,\r\n  Geom,\r\n  Axis,\r\n  Tooltip,\r\n} from \"bizcharts\"\r\n\r\ninterface SalesData{\r\n    year:string,\r\n    sales:number\r\n}\r\n\r\nconst Bar=(data:Array<SalesData>)=>{\r\n\r\n    data = [\r\n        {\r\n          year: \"1月\",\r\n          sales: 38\r\n        },\r\n        {\r\n          year: \"2月\",\r\n          sales: 52\r\n        },\r\n        {\r\n          year: \"3月\",\r\n          sales: 61\r\n        },\r\n        {\r\n          year: \"4月\",\r\n          sales: 145\r\n        },\r\n        {\r\n          year: \"5月\",\r\n          sales: 48\r\n        },\r\n        {\r\n          year: \"6月\",\r\n          sales: 38\r\n        },\r\n        {\r\n          year: \"7月\",\r\n          sales: 28\r\n        },\r\n        {\r\n          year: \"8月\",\r\n          sales: 38\r\n        },\r\n        {\r\n          year: \"59月\",\r\n          sales: 68\r\n        },\r\n        {\r\n          year: \"10月\",\r\n          sales: 38\r\n        },\r\n        {\r\n          year: \"11月\",\r\n          sales: 58\r\n        },\r\n        {\r\n          year: \"12月\",\r\n          sales: 38\r\n        }\r\n      ]\r\n      const cols = {\r\n        sales: {\r\n          tickInterval: 20\r\n        }\r\n      }\r\n    return (\r\n        <div style={{width: '100%', marginLeft: -30}}>\r\n          <Chart height={338} data={data} scale={cols} forceFit>\r\n            <Axis name=\"year\"/>\r\n            <Axis name=\"sales\"/>\r\n            <Tooltip\r\n              crosshairs={{\r\n                type: \"y\"\r\n              }}\r\n            />\r\n            <Geom type=\"interval\" position=\"year*sales\"/>\r\n          </Chart>\r\n        </div>\r\n      )\r\n}\r\n\r\nexport default Bar;","import React from 'react'\r\nimport User from '../../models/user';\r\nimport {\r\n    Icon,\r\n    Card,\r\n    Statistic,\r\n    DatePicker,\r\n    Timeline\r\n} from 'antd'\r\n\r\nimport moment from 'moment'\r\n\r\nimport Line from './line'\r\nimport Bar from './bar'\r\nimport './home.less'\r\n\r\nconst dateFormat = 'YYYY/MM/DD'\r\nconst { RangePicker } = DatePicker\r\n\r\nconst { connect } = require('react-redux')\r\n\r\n\r\nfunction Home() {\r\n\r\n    const [visited, setVisited] = React.useState(true)\r\n\r\n    return (\r\n        <div className='home'>\r\n            <Card\r\n                className=\"home-card\"\r\n                title=\"商品总量\"\r\n                extra={<Icon style={{ color: 'rgba(0,0,0,.45)' }} type=\"question-circle\" />}\r\n                style={{ width: 250 }}\r\n                headStyle={{ color: 'rgba(0,0,0,.45)' }}\r\n            >\r\n                <Statistic\r\n                    value={1128163}\r\n                    suffix=\"个\"\r\n                    style={{ fontWeight: 'bolder' }}\r\n                />\r\n                <Statistic\r\n                    value={15}\r\n                    valueStyle={{ fontSize: 15 }}\r\n                    prefix={'周同比'}\r\n                    suffix={<div>%<Icon style={{ color: 'red', marginLeft: 10 }} type=\"arrow-down\" /></div>}\r\n                />\r\n                <Statistic\r\n                    value={10}\r\n                    valueStyle={{ fontSize: 15 }}\r\n                    prefix={'日同比'}\r\n                    suffix={<div>%<Icon style={{ color: '#3f8600', marginLeft: 10 }} type=\"arrow-up\" /></div>}\r\n                />\r\n            </Card>\r\n\r\n            <Line {...[]} />\r\n\r\n            <Card\r\n                className=\"home-content\"\r\n                title={<div className=\"home-menu\">\r\n                    <span className={visited ? \"home-menu-active home-menu-visited\" : 'home-menu-visited'}\r\n                        onClick={(e)=>setVisited(true)}>访问量</span>\r\n                    <span className={visited ? \"\" : 'home-menu-active'} onClick={(e)=>setVisited(false)}>销售量</span>\r\n                </div>}\r\n                extra={<RangePicker\r\n                    defaultValue={[moment('2019/01/01', dateFormat), moment('2019/06/01', dateFormat)]}\r\n                    format={dateFormat}\r\n                />}\r\n            >\r\n                <Card\r\n                    className=\"home-table-left\"\r\n                    title={visited ? '访问趋势' : '销售趋势'}\r\n                    bodyStyle={{ padding: 0, height: 275 }}\r\n                    extra={<Icon type=\"reload\" />}\r\n                >\r\n                    <Bar {...[]} />\r\n                </Card>\r\n\r\n                <Card title='任务' extra={<Icon type=\"reload\" />} className=\"home-table-right\">\r\n                    <Timeline>\r\n                        <Timeline.Item color=\"green\">新版本迭代会</Timeline.Item>\r\n                        <Timeline.Item color=\"green\">完成网站设计初版</Timeline.Item>\r\n                        <Timeline.Item color=\"red\">\r\n                            <p>联调接口</p>\r\n                            <p>功能验收</p>\r\n                        </Timeline.Item>\r\n                        <Timeline.Item>\r\n                            <p>登录功能设计</p>\r\n                            <p>权限验证</p>\r\n                            <p>页面排版</p>\r\n                        </Timeline.Item>\r\n                    </Timeline>\r\n                </Card>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default connect(\r\n    (state: { user: User; }) => ({ user: state.user }),\r\n    {}\r\n)(Home)","import React, {useEffect} from 'react'\r\nimport {\r\n  Form,\r\n  Input\r\n} from 'antd'\r\nimport { FormComponentProps } from 'antd/lib/form'\r\n\r\nconst Item = Form.Item\r\n\r\ninterface AddFormProps  extends FormComponentProps{\r\n        // 用来传递form对象的函数\r\n        setForm: Function;\r\n}\r\n/*\r\n添加分类的form组件\r\n */\r\nconst AddForm =(props:AddFormProps)=> {\r\n\r\n    useEffect(()=>{\r\n        props.setForm(props.form)\r\n    },[1]);\r\n\r\n\r\n    const { getFieldDecorator } = props.form\r\n    // 指定Item布局的配置对象\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 },  // 左侧label的宽度\r\n      wrapperCol: { span: 15 }, // 右侧包裹的宽度\r\n    }\r\n\r\n    return (\r\n      <Form>\r\n        <Item label='角色名称' {...formItemLayout}>\r\n          {\r\n            getFieldDecorator('roleName', {\r\n              initialValue: '',\r\n              rules: [\r\n                {required: true, message: '角色名称必须输入'}\r\n              ]\r\n            })(\r\n              <Input placeholder='请输入角色名称'/>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n}\r\n\r\nexport default Form.create<AddFormProps>()(AddForm)","import React, { useEffect, useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n    Form,\r\n    Input,\r\n    Tree\r\n} from 'antd'\r\nimport { FormComponentProps } from 'antd/lib/form';\r\nimport { reqMenuList } from '../../redux/actions';\r\nimport MenuModel from '../../models/menu';\r\nimport { reqMenuTree, reqMenus } from \"../../api/index\";\r\nimport RoleModel from '../../models/role';\r\nimport converter2Menu from '../../converter/converter2Menu';\r\n\r\n\r\nconst Item = Form.Item\r\n\r\nconst { TreeNode } = Tree;\r\n\r\ninterface AuthFormProps extends FormComponentProps {\r\n    // 用来传递form对象的函数\r\n    setForm: Function;\r\n    role: any | null;\r\n    setUpdateMenuKeys:Function;\r\n}\r\n\r\n\r\n/*\r\n添加分类的form组件\r\n */\r\nconst AuthForm = (props: AuthFormProps) => {\r\n\r\n    const [checkedKeys, setCheckedKeys] = useState()\r\n    const [treeNodes, setTreeNodes] = useState(Array<any>())\r\n\r\n    useEffect(() => {\r\n        // 根据传入角色的menus生成初始状态\r\n        initMenusTree();\r\n        initCheckedKeys();\r\n        return ()=>{\r\n            setCheckedKeys([]);\r\n            setTreeNodes([]);\r\n        }\r\n    }, [props.role]);\r\n\r\n    const initMenusTree = async () => {\r\n        // 得到最新的menus\r\n        const { data, status } = await reqMenuTree();\r\n        if (status === 0 && data) {\r\n            props.setForm(props.form)\r\n            const tree = data.map((x: any) => converter2Menu(x));\r\n            setTreeNodes(getTreeNodes(tree));\r\n        }\r\n    }\r\n    const initCheckedKeys = async () => {\r\n        const { data, status } = await reqMenus(props.role._id)\r\n        if (status === 0 && data) {\r\n            const menus = data.map((x: any) => x.id);\r\n            setCheckedKeys(menus)\r\n        }\r\n    }\r\n\r\n    const convertMenuTreeData = (menuTree: Array<any>) => {\r\n\r\n        const res = menuTree.map((x: any) => {\r\n            if (x.children && x.children.length > 0) {\r\n                x.children = convertMenuTreeData(x.children);\r\n            }\r\n            return {\r\n                tilte: x.name,\r\n                key: x.id,\r\n                children: x.children\r\n            };\r\n        });\r\n        return res;\r\n    }\r\n\r\n    /*\r\n    为父组件提交获取最新menus数据的方法\r\n     */\r\n    const getMenus = () => checkedKeys\r\n\r\n\r\n    const getTreeNodes = (menuList: MenuModel[]) => {\r\n        return menuList.reduce((pre: any, item) => {\r\n            pre.push(\r\n                <TreeNode title={item.title} key={item._id}>\r\n                    {item.children ? getTreeNodes(item.children) : null}\r\n                </TreeNode>\r\n            )\r\n            return pre\r\n        }, [])\r\n    }\r\n\r\n    // 选中某个node时的回调\r\n    const onCheck = (checkedKeys: any) => {\r\n        console.log('onCheck', checkedKeys);\r\n        props.setUpdateMenuKeys(checkedKeys);\r\n        setCheckedKeys(checkedKeys)\r\n    };\r\n\r\n\r\n    // 根据新传入的role来更新checkedKeys状态\r\n    /*\r\n    当组件接收到新的属性时自动调用\r\n     */\r\n    useEffect(() => {\r\n        const menus = props.role.menus\r\n        setCheckedKeys(menus)\r\n    }, [])\r\n\r\n    console.log('AuthForm render()')\r\n    const { role } = props\r\n    // 指定Item布局的配置对象\r\n    const formItemLayout = {\r\n        labelCol: { span: 4 },  // 左侧label的宽度\r\n        wrapperCol: { span: 15 }, // 右侧包裹的宽度\r\n    }\r\n\r\n    return (\r\n        <div >\r\n            <Item label='角色名称' {...formItemLayout}>\r\n                <Input value={role.name} disabled />\r\n            </Item>\r\n\r\n            <Tree\r\n                checkable\r\n                defaultExpandAll={true}\r\n                checkedKeys={checkedKeys}\r\n                onCheck={onCheck}\r\n            >\r\n                <TreeNode title=\"平台权限\" key=\"all\">\r\n                    {treeNodes}\r\n                </TreeNode>\r\n            </Tree>\r\n        </div>\r\n    )\r\n}\r\nexport default Form.create<AuthFormProps>()(AuthForm)","/*\r\n包含n个日期时间处理的工具函数模块\r\n*/\r\n\r\n/*\r\n  格式化日期\r\n*/\r\nexport function formateDate(time) {\r\n    if (!time) return ''\r\n    let date = new Date(time)\r\n    return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate()\r\n      + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\r\n  }","export default class RoleModel {\r\n    _id:string='';\r\n    name:any='';\r\n    authTime:any='';\r\n    authUser:any='';\r\n    menus:Array<any>=[];\r\n}","import React, { useState, useEffect, createContext } from 'react'\r\nimport {\r\n    Card,\r\n    Button,\r\n    Table,\r\n    Modal,\r\n    message\r\n} from 'antd'\r\n\r\n\r\nimport { PAGE_SIZE } from \"../../utils/constants\"\r\nimport { reqRoles, reqAddRole, reqUpdateRole, reqMenuTree } from '../../api'\r\nimport AddForm from './add-form'\r\nimport AuthForm from './auth-form'\r\nimport { formateDate } from '../../utils/dateUtils'\r\nimport { logout, reqMenuList } from '../../redux/actions'\r\nimport { WrappedFormUtils } from 'antd/lib/form/Form'\r\nimport User from '../../models/user'\r\nimport RoleModel from \"../../models/role\";\r\nimport converter2Role from '../../converter/converter2Role'\r\nconst { connect } = require('react-redux')\r\n\r\ninterface RoleProps {\r\n    user: User;\r\n    logout(): any;\r\n}\r\n/*\r\n角色路由\r\n */\r\nconst Role = (props: RoleProps) => {\r\n    // 所有角色的列表\r\n    const [roles, setRoles] = useState()\r\n    // 选中的role\r\n    const [role, setRole] = useState(new RoleModel())\r\n    const [updateMenuKeys, setUpdateMenuKeys] = useState(Array())\r\n    // 是否显示添加界面\r\n    const [isShowAdd, setIsShowAdd] = useState(false)\r\n    // 是否显示设置权限界面\r\n    const [isShowAuth, setIsShowAuth] = useState(false)\r\n    const [columns, setColumns] = useState()\r\n    const [form, setForm] = useState<WrappedFormUtils | any>();\r\n    const [total, setTotal] = useState(0)\r\n\r\n\r\n    const initColumn = () => {\r\n        setColumns([\r\n            {\r\n                title: '角色名称',\r\n                dataIndex: 'name'\r\n            },\r\n            {\r\n                title: '创建时间',\r\n                dataIndex: 'gmtCreate',\r\n                render: (gmtCreate: any) => formateDate(gmtCreate)\r\n            },\r\n            {\r\n                title: '授权时间',\r\n                dataIndex: 'gmtAuth',\r\n                render: (gmtAuth: any) => formateDate(gmtAuth)\r\n            },\r\n            {\r\n                title: '授权人',\r\n                dataIndex: 'authUser'\r\n            },\r\n        ]);\r\n    }\r\n\r\n    const getRoles = async () => {\r\n        const result = await reqRoles()\r\n        if (result.status === 0 && result.data) {\r\n            const { list, total } = result.data;\r\n            setTotal(total);\r\n            const roles = list.map((x: any) => converter2Role(x))\r\n            setRoles(roles);\r\n        }\r\n    }\r\n\r\n\r\n    const onRow = (role: any) => {\r\n        return {\r\n            onClick: (event: any) => { // 点击行\r\n                console.log('row onClick()', role)\r\n                // alert('点击行')\r\n                setRole(role);\r\n            },\r\n        }\r\n    }\r\n\r\n    /*\r\n    添加角色\r\n     */\r\n    const addRole = () => {\r\n        // 进行表单验证, 只能通过了才向下处理\r\n        form.validateFields(async (error: any, values: any) => {\r\n            if (!error) {\r\n\r\n                // 收集输入数据\r\n                const { roleName } = values\r\n                form.resetFields()\r\n                // 请求添加\r\n                const result = await reqAddRole(roleName)\r\n                // 根据结果提示/更新列表显示\r\n                if (result.status === 0) {\r\n                    message.success('添加角色成功')\r\n                    // 隐藏确认框\r\n                    setIsShowAdd(false);\r\n                    getRoles();\r\n\r\n                } else {\r\n                    message.error('添加角色失败')\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /*\r\n    更新角色\r\n     */\r\n    const updateRole = async () => {\r\n\r\n        // 隐藏确认框\r\n        setIsShowAdd(false);\r\n\r\n        // 得到最新的menus\r\n        const menus = await reqMenuTree()\r\n        role.menus = menus\r\n        // 请求更新\r\n        const result = await reqUpdateRole(role._id, updateMenuKeys)\r\n        if (result.status === 0) {\r\n            // this.getRoles()\r\n            // 如果当前更新的是自己角色的权限, 强制退出\r\n            if (props.user.roles.map((x: RoleModel) => x._id).indexOf(role._id) > -1) {\r\n                props.logout()\r\n                message.success('当前用户角色权限成功')\r\n            } else {\r\n                message.success('设置角色权限成功')\r\n                setRoles([...roles]);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        initColumn()\r\n        getRoles();\r\n    }, [])\r\n\r\n    const title = (\r\n        <span>\r\n            <Button type='primary' onClick={() => setIsShowAdd(true)}>创建角色</Button> &nbsp;&nbsp;\r\n            <Button type='primary' disabled={!role._id} onClick={() => setIsShowAuth(true)}>设置角色权限</Button>\r\n        </span>\r\n    )\r\n\r\n\r\n    return (\r\n        <Card title={title}>\r\n            <Table\r\n                bordered\r\n                rowKey='_id'\r\n                dataSource={roles}\r\n                columns={columns}\r\n                pagination={{ defaultPageSize: PAGE_SIZE, total: total }}\r\n                rowSelection={{\r\n                    type: 'radio',\r\n                    selectedRowKeys: [role._id],\r\n                    onSelect: (role) => { // 选择某个radio时回调\r\n                        setRole(role);\r\n                    }\r\n\r\n                }}\r\n                onRow={onRow}\r\n            />\r\n\r\n            <Modal\r\n                title=\"添加角色\"\r\n                visible={isShowAdd}\r\n                onOk={addRole}\r\n                onCancel={() => {\r\n                    setIsShowAdd(false)\r\n                    form.resetFields()\r\n                }}\r\n            >\r\n                <AddForm\r\n                    setForm={(form: any) => { setForm(form) }}\r\n                />\r\n            </Modal>\r\n\r\n            <Modal\r\n                title=\"设置角色权限\"\r\n                visible={isShowAuth}\r\n                onOk={updateRole}\r\n                onCancel={() => {\r\n                    setIsShowAuth(false)\r\n                }}\r\n            >\r\n                <AuthForm\r\n                    setUpdateMenuKeys={setUpdateMenuKeys}\r\n                    setForm={(form: any) => { setForm(form) }}\r\n                    role={role} />\r\n            </Modal>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    (state: any) => ({ ...state }),\r\n    { logout }\r\n)(Role)","import React from 'react'\r\nimport './index.less'\r\n/*\r\n外形像链接的按钮\r\n */\r\nexport default function LinkButton(props:any) {\r\n  return <button {...props} className=\"link-button\"></button>\r\n}","import React, { useState, useEffect } from 'react'\r\nimport {\r\n    Form,\r\n    Select,\r\n    Input\r\n} from 'antd'\r\nimport UserModel from '../../models/user'\r\nimport { reqRoles } from '../../api'\r\nimport converter2Role from '../../converter/converter2Role'\r\n\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\n\r\ninterface UserFormProps {\r\n    setForm: Function, // 用来传递form对象的函数\r\n    roles: any,\r\n    form: any;\r\n    user: UserModel\r\n}\r\n/*\r\n添加/修改用户的form组件\r\n */\r\nconst UserForm = (props: UserFormProps) => {\r\n    const [roles, setRoles] = useState([])\r\n    useEffect(() => {\r\n        props.setForm(props.form);\r\n        initRoleoptions();\r\n    }, []);\r\n\r\n    const initRoleoptions = async () => {\r\n        const result = await reqRoles();\r\n        if (result.status === 0) {\r\n            const { list } = result.data\r\n            const roles = list.map((x: any) => { return { _id: x.id, name: x.name } });\r\n            setRoles(roles);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const { user } = props\r\n    const { getFieldDecorator } = props.form\r\n    // 指定Item布局的配置对象\r\n    const formItemLayout = {\r\n        labelCol: { span: 4 },  // 左侧label的宽度\r\n        wrapperCol: { span: 15 }, // 右侧包裹的宽度\r\n    }\r\n\r\n    return (\r\n        <Form {...formItemLayout}>\r\n            <Item label='用户名'>\r\n                {\r\n                    getFieldDecorator('username', {\r\n                        initialValue: user.username,\r\n                    })(\r\n                        <Input placeholder='请输入用户名' />\r\n                    )\r\n                }\r\n            </Item>\r\n\r\n            {\r\n                user._id ? null : (\r\n                    <Item label='密码'>\r\n                        {\r\n                            getFieldDecorator('password', {\r\n                                initialValue: user.password,\r\n                            })(\r\n                                <Input type='password' placeholder='请输入密码' />\r\n                            )\r\n                        }\r\n                    </Item>\r\n                )\r\n            }\r\n\r\n            <Item label='手机号'>\r\n                {\r\n                    getFieldDecorator('phone', {\r\n                        initialValue: user.phone,\r\n                    })(\r\n                        <Input placeholder='请输入手机号' />\r\n                    )\r\n                }\r\n            </Item>\r\n            <Item label='邮箱'>\r\n                {\r\n                    getFieldDecorator('email', {\r\n                        initialValue: user.email,\r\n                    })(\r\n                        <Input placeholder='请输入邮箱' />\r\n                    )\r\n                }\r\n            </Item>\r\n\r\n            <Item label='角色'>\r\n                {\r\n                    getFieldDecorator('roleIds', {\r\n                        initialValue: user.roles && user.roles.length > 0 ? user.roles.map((x:any)=>x._id) : [],\r\n                    })(\r\n                        <Select\r\n                        mode=\"multiple\"\r\n                        >\r\n                            {\r\n                                roles.map((role: any) => <Option key={role._id} value={role._id}>{role.name}</Option>)\r\n                            }\r\n                        </Select>\r\n                    )\r\n                }\r\n            </Item>\r\n        </Form>\r\n    )\r\n}\r\n\r\nexport default Form.create<UserFormProps>()(UserForm)","import React, { useState, useEffect } from 'react'\r\nimport {\r\n    Card,\r\n    Button,\r\n    Table,\r\n    Modal,\r\n    message\r\n} from 'antd'\r\nimport { formateDate } from \"../../utils/dateUtils\"\r\nimport LinkButton from \"../../components/link-button/index\"\r\nimport { reqDeleteUser, reqUsers, reqAddUser, reqUpdateUser, reqRoles } from \"../../api/index\";\r\nimport UserForm from './user-form'\r\nimport UserModel from '../../models/user'\r\nimport RoleModel from '../../models/role';\r\nimport { PaginationConfig } from 'antd/lib/table';\r\nimport converter2User from '../../converter/converter2User';\r\n\r\ninterface UserProps {\r\n}\r\n/*\r\n用户路由\r\n */\r\nconst User = (props: UserProps) => {\r\n\r\n    const [columns, setColumns] = useState(Array());\r\n    const [roleNames, setRoleNames] = useState<any>({});\r\n    // 选中的用户\r\n    const [user, setUser] = useState();\r\n    // 所有用户列表\r\n    const [users, setUsers] = useState(Array());\r\n    // 所有角色列表\r\n    const [roles, setRoles] = useState(Array())\r\n    // 是否显示确认框\r\n    const [isShow, setIsShow] = useState(false);\r\n    const [form, setForm] = useState();\r\n    const [pagination, setPagination] = useState<any>({\r\n        current: 1,\r\n        pageSize: 5,\r\n        total: 0\r\n    })\r\n    const initColumns = () => {\r\n        setColumns([\r\n            {\r\n                title: '用户名',\r\n                dataIndex: 'username'\r\n            },\r\n            {\r\n                title: '邮箱',\r\n                dataIndex: 'email'\r\n            },\r\n\r\n            {\r\n                title: '电话',\r\n                dataIndex: 'phone'\r\n            },\r\n            {\r\n                title: '注册时间',\r\n                dataIndex: 'gmtCreate',\r\n                render: (gmtCreate: any) => formateDate(gmtCreate)\r\n            },\r\n            {\r\n                title: '所属角色',\r\n                dataIndex: 'roleNames',\r\n            },\r\n            {\r\n                title: '操作',\r\n                render: (user: UserModel) => (\r\n                    <span>\r\n                        <LinkButton onClick={() => showUpdate(user)}>修改</LinkButton>\r\n                        <LinkButton onClick={() => deleteUser(user)}>删除</LinkButton>\r\n                    </span>\r\n                )\r\n            },\r\n        ]);\r\n    }\r\n\r\n    /*\r\n    显示添加界面\r\n     */\r\n    const showAdd = () => {\r\n        // 去除前面保存的user\r\n        setUser({});\r\n        setIsShow(true);\r\n    }\r\n\r\n    /*\r\n    显示修改界面\r\n     */\r\n    const showUpdate = (user: UserModel) => {\r\n        // 保存user\r\n        setUser(user);\r\n        setIsShow(true);\r\n    }\r\n\r\n    /*\r\n    删除指定用户\r\n     */\r\n    const deleteUser = (user: UserModel) => {\r\n        Modal.confirm({\r\n            title: `确认删除${user.username}吗?`,\r\n            onOk: async () => {\r\n                const result = await reqDeleteUser(user._id)\r\n                if (result.status === 0) {\r\n                    message.success('删除用户成功!')\r\n                    getUsers()\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /*\r\n    添加/更新用户\r\n     */\r\n    const addOrUpdateUser = async () => {\r\n\r\n        // 1. 收集输入数据\r\n        let userForm: any = form.getFieldsValue()\r\n        // 如果是更新\r\n        const result = user && user._id ? await reqUpdateUser({...userForm,id: user._id}) : await reqAddUser(userForm)\r\n        // 3. 更新列表显示\r\n        if (result.status === 0) {\r\n            message.success(` 操作成功!`)\r\n            form.resetFields();\r\n            setIsShow(false);\r\n            getUsers();\r\n\r\n        } else {\r\n            message.error(` 操作失败!`)\r\n        }\r\n    }\r\n\r\n    const getUsers = async () => {\r\n        const result = await reqUsers(pagination)\r\n        if (result.status === 0) {\r\n            const { total, list } = result.data;\r\n            const users = list.map((x: any) => converter2User(x));\r\n            setUsers(users);\r\n            setPagination({ ...pagination, total: parseInt(total) })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        initColumns()\r\n        getUsers()\r\n    }, []);\r\n\r\n    const onChange = (pagination: PaginationConfig) => {\r\n        // setPagination({ pageSize: pagination.pageSize!, current: pagination.current! });\r\n    }\r\n\r\n    const title = <Button type='primary' onClick={showAdd}>创建用户</Button>\r\n\r\n    return (\r\n        <Card title={title}>\r\n            <Table\r\n                bordered\r\n                rowKey='_id'\r\n                dataSource={users}\r\n                columns={columns}\r\n                pagination={pagination}\r\n                onChange={onChange}\r\n            />\r\n\r\n            <Modal\r\n                title={user && user._id ? '修改用户' : '添加用户'}\r\n                visible={isShow}\r\n                onOk={addOrUpdateUser}\r\n                onCancel={() => {\r\n                    form.resetFields()\r\n                    setIsShow(false)\r\n                }}\r\n            >\r\n                <UserForm\r\n                    setForm={(form: any) => setForm(form)}\r\n                    roles={roles}\r\n                    user={user}\r\n                />\r\n            </Modal>\r\n\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default User;","import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react'\r\nimport { Modal } from 'antd'\r\n\r\nimport LinkButton from '../link-button'\r\nimport { reqWeather } from '../../api'\r\nimport { formateDate } from '../../utils/dateUtils'\r\nimport './index.less'\r\nimport { logout, reqMenuList, setHeadTitle } from '../../redux/actions'\r\nimport User from '../../models/user'\r\nimport Menu from '../../models/menu'\r\nimport Weather from '../../models/weather'\r\n\r\nconst { connect } = require('react-redux')\r\nconst { withRouter } = require('react-router-dom')\r\n\r\n\r\ninterface HeaderReduxTypes {\r\n  headTitle: any;\r\n  user: User;\r\n  menuList: Menu[]\r\n}\r\n\r\ninterface HeaderTypes extends HeaderReduxTypes {\r\n  setHeadTitle(title: string): Function\r\n  logout(): any;\r\n  reqMenuList(): Function\r\n  location: any;\r\n}\r\n/*\r\n 头部的组件\r\n */\r\nconst Header = (props: HeaderTypes) => {\r\n\r\n\r\n  // 当前时间字符串\r\n  const [currentTime, setCurrentTime] = useState(formateDate(Date.now()));\r\n  // 天气的文本\r\n  const [weather, setWeather] = useState({ wendu: '', quality: '' });\r\n\r\n  const [intervalId, setIntervalId] = useState();\r\n\r\n  const getTime = () => {\r\n    // 每隔1s获取当前时间, 并更新状态数据currentTime\r\n    const interId = setInterval(() => {\r\n      const cur = formateDate(Date.now())\r\n      setCurrentTime(cur);\r\n    }, 1000)\r\n    setIntervalId(interId);\r\n  }\r\n\r\n  const getWeather = async () => {\r\n    // 调用接口请求异步获取数据\r\n    const weather: Weather = await reqWeather('101210101')//杭州的城市编码\r\n    // 更新状态\r\n    weather ? setWeather(weather) : setWeather({ wendu: \"\", quality: '' })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!weather.quality || !weather.wendu) {\r\n      getWeather();\r\n    }\r\n  }, [props.location.pathname])\r\n\r\n  useEffect(() => {\r\n    getTitle();\r\n  }, [props.location.pathname, props.menuList])\r\n\r\n  const getTitle = () => {\r\n\r\n    if (props.menuList.length === 0) {\r\n      props.reqMenuList()\r\n    }\r\n    const path = props.location.pathname\r\n    // 得到当前请求路径\r\n    let data = props.menuList\r\n    if (!(data instanceof Array)) return;\r\n    data.every((item: Menu) => {\r\n      if (item.key === path) { // 如果当前item对象的key与path一样,item的title就是需要显示的title\r\n        props.setHeadTitle(item.title)\r\n        return false;\r\n      } else if (item.children) {\r\n        // 在所有子item中查找匹配的\r\n        const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0)\r\n        // 如果有值才说明有匹配的\r\n        if (cItem) {\r\n          // 取出它的title\r\n          props.setHeadTitle(item.title)\r\n          return false;\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n  退出登陆\r\n   */\r\n  const logoutTip = () => {\r\n    // 显示确认框\r\n    Modal.confirm({\r\n      content: '确定退出吗?',\r\n      onOk: () => {\r\n        props.logout()\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n  第一次render()之后执行一次\r\n  一般在此执行异步操作: 发ajax请求/启动定时器\r\n   */\r\n  useEffect(() => {\r\n    getTime();\r\n    // 当前组件卸载之前调用\r\n    return clearInterval(intervalId)\r\n  }, [currentTime])\r\n\r\n  const username = props.user.username\r\n\r\n  // 得到当前需要显示的title\r\n  const title = props.headTitle\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"header-top\">\r\n        <span>欢迎, {username}</span>\r\n        <LinkButton onClick={() => logoutTip()}>退出</LinkButton>\r\n      </div>\r\n      <div className=\"header-bottom\">\r\n        <div className=\"header-bottom-left\">{title}</div>\r\n        <div className=\"header-bottom-right\">\r\n          <span>{currentTime}</span>\r\n          <span>空气质量：{weather.quality}</span>\r\n          <span>温度：{weather.wendu} ℃</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default connect(\r\n  (state: HeaderReduxTypes) => ({...state }),\r\n  { logout, reqMenuList, setHeadTitle }\r\n)(withRouter(Header))","import React, { useEffect} from 'react'\r\nimport {\r\n  Form,\r\n  Select,\r\n  Input\r\n} from 'antd'\r\nimport CategoryModel from '../../models/category'\r\nimport { FormComponentProps } from 'antd/lib/form'\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\n\r\n\r\ninterface AddFormProps extends FormComponentProps{\r\n    // 用来传递form对象的函数\r\n    setForm: Function;\r\n    // 一级分类的数组\r\n    categorys: Array<CategoryModel>;\r\n    // 父分类的ID\r\n    parentId: string; \r\n}\r\n/*\r\n添加分类的form组件\r\n */\r\nconst AddForm =(props:AddFormProps)=> {\r\n\r\n\r\n    useEffect(()=>{\r\n           props.setForm(props.form)\r\n    },[1]);\r\n\r\n    const {categorys, parentId} = props\r\n    const { getFieldDecorator } = props.form\r\n\r\n    return (\r\n      <Form>\r\n        <Item>\r\n          {\r\n            getFieldDecorator('parentId', {\r\n              initialValue: parentId\r\n            })(\r\n              <Select>\r\n                <Option value='0'>一级分类</Option>\r\n                {\r\n                  categorys.map(c => <Option value={c._id}>{c.name}</Option>)\r\n                }\r\n              </Select>\r\n            )\r\n          }\r\n\r\n        </Item>\r\n\r\n        <Item>\r\n          {\r\n            getFieldDecorator('categoryName', {\r\n              initialValue: '',\r\n              rules: [\r\n                {required: true, message: '分类名称必须输入'}\r\n              ]\r\n            })(\r\n              <Input placeholder='请输入分类名称'/>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n}\r\n\r\nexport default Form.create<AddFormProps>()(AddForm)","import React, { useEffect } from 'react'\r\nimport {\r\n    Form,\r\n    Input\r\n} from 'antd'\r\nimport { FormComponentProps } from 'antd/lib/form'\r\nimport CategoryModel from '../../models/category'\r\n\r\nconst Item = Form.Item\r\n\r\ninterface UpdateFormProps extends FormComponentProps {\r\n    category: CategoryModel;\r\n    setForm: Function;\r\n}\r\n/*\r\n更新分类的form组件\r\n */\r\nconst UpdateForm = (props: UpdateFormProps) => {\r\n    // 将form对象通过setForm()传递父组件\r\n    useEffect(() => {\r\n        props.setForm(props.form)\r\n    }, []);\r\n\r\n    const { name:categoryName } = props.category;\r\n    const { getFieldDecorator } = props.form\r\n\r\n    return (\r\n        <Form>\r\n            <Item>\r\n                {\r\n                    getFieldDecorator('categoryName', {\r\n                        initialValue: categoryName,\r\n                        rules: [\r\n                            { required: true, message: '分类名称必须输入' }\r\n                        ]\r\n                    })(\r\n                        <Input placeholder='请输入分类名称' />\r\n                    )\r\n                }\r\n            </Item>\r\n        </Form>\r\n    )\r\n}\r\n\r\nexport default Form.create<UpdateFormProps>()(UpdateForm)","/**\r\n * 模型转换器 前后端模型适配\r\n */\r\n\r\nconst converter2Category = (categoryVo) => {\r\n    let category = {}\r\n    category._id = categoryVo.id + \"\"\r\n    category.name = categoryVo.name\r\n    category.parentId = categoryVo.parentId\r\n    if (categoryVo.children && categoryVo.children.length>0 ) {\r\n        category.children = categoryVo.children.map(x => \r\n            converter2Category(x)\r\n        );\r\n    }\r\n\r\n    return category\r\n}\r\n\r\nexport default converter2Category;","import React, { useState, useEffect } from 'react'\r\nimport {\r\n    Card,\r\n    Table,\r\n    Button,\r\n    Icon,\r\n    message,\r\n    Modal\r\n} from 'antd'\r\n\r\nimport LinkButton from '../../components/link-button'\r\nimport { reqCategorys, reqUpdateCategory, reqAddCategory } from '../../api'\r\nimport AddForm from './add-form'\r\nimport UpdateForm from './update-form'\r\nimport CategoryModel from '../../models/category'\r\nimport { FormComponentProps } from 'antd/lib/form'\r\nimport converter2Category from '../../converter/converter2Category'\r\nimport { WrappedFormUtils } from 'antd/lib/form/Form'\r\nconst { connect } = require('react-redux')\r\n\r\ninterface CategoryProps {\r\n}\r\n/*\r\n商品分类路由\r\n */\r\nfunction Category( props: CategoryProps) {\r\n\r\n    const [form,setForm] = useState<WrappedFormUtils|any>();\r\n\r\n    /*\r\n    为第一次render()准备数据\r\n     */\r\n    useEffect(() => {\r\n        initColumns();\r\n    }, []);\r\n\r\n    /*\r\n    执行异步任务: 发异步ajax请求\r\n     */\r\n    //获取一级分类列表显示\r\n    useEffect(() => {\r\n        getCategorys()\r\n    }, [1]) //useEffect 的第二个参数是 [1]，其实也可以是任何一个常数，因为它永远不变 这里只有mount时才被调用，相当于componentDidMount\r\n\r\n\r\n    const [columns, setColumns] = useState(Array<any>());\r\n    // 标识添加/更新的确认框是否显示, 0: 都不显示, 1: 显示添加, 2: 显示更新\r\n    const [showStatus, setShowStatus] = useState(0);\r\n    const [category, setCategory] = useState();\r\n    // 是否正在获取数据中\r\n    const [loading, setLoading] = useState(false);\r\n    // 当前需要显示的分类列表的父分类ID\r\n    const [parentId, setParentId] = useState('0');\r\n    // 当前需要显示的分类列表的父分类名称\r\n    const [parentName, setParentName] = useState('');\r\n    // 一级分类列表\r\n    const [categorys, setCategorys] = useState(Array<CategoryModel>());\r\n    // 二级分类列表\r\n    const [subCategorys, setSubCategorys] = useState([]);\r\n\r\n    /*\r\n    初始化Table所有列的数组\r\n     */\r\n    const initColumns = () => {\r\n        const cols = [\r\n            {\r\n                title: '分类的名称',\r\n                dataIndex: 'name', // 显示数据对应的属性名\r\n            },\r\n            {\r\n                title: '操作',\r\n                width: 300,\r\n                render: (category: CategoryModel) => ( // 返回需要显示的界面标签\r\n                    <span>\r\n                        <LinkButton onClick={() => showUpdate(category)}>修改分类</LinkButton>\r\n                        {/*如何向事件回调函数传递参数: 先定义一个匿名函数, 在函数调用处理的函数并传入数据*/}\r\n                        {parentId === '0' ? <LinkButton onClick={() => showSubCategorys(category)}>查看子分类</LinkButton> : null}\r\n\r\n                    </span>\r\n                )\r\n            }\r\n        ]\r\n        setColumns(cols);\r\n    }\r\n\r\n\r\n    /*\r\n    异步获取一级/二级分类列表显示\r\n    parentId: 如果没有指定根据状态中的parentId请求, 如果指定了根据指定的请求\r\n     */\r\n    const getCategorys = async (pId: string | void) => {\r\n\r\n        // 在发请求前, 显示loading\r\n        setLoading(true);\r\n        pId = pId || parentId\r\n        // 发异步ajax请求, 获取数据\r\n        const result = await reqCategorys(pId)\r\n        // 在请求完成后, 隐藏loading\r\n        setLoading(false)\r\n\r\n        if (result.status === 0) {\r\n            // 取出分类数组(可能是一级也可能二级的)\r\n            const categorys = result.data.map((x: CategoryModel) => converter2Category(x))\r\n            if (pId === '0') {\r\n                // 更新一级分类状态\r\n                setCategorys(categorys);\r\n            } else {\r\n                // 更新二级分类状态\r\n                setSubCategorys(categorys)\r\n            }\r\n        } else {\r\n            message.error('获取分类列表失败')\r\n        }\r\n    }\r\n\r\n    /*\r\n    显示指定一级分类对象的二子列表\r\n     */\r\n    const showSubCategorys = async (cate: CategoryModel) => {\r\n        // 更新状态\r\n        setParentId(cate._id);\r\n        setParentName(cate.name);\r\n        // 在状态更新且重新render()后执行\r\n\r\n        // 获取二级分类列表显示\r\n        await getCategorys(cate._id)\r\n    }\r\n    /*\r\n    显示指定一级分类列表\r\n     */\r\n    const showCategorys = () => {\r\n        // 更新为显示一列表的状态\r\n        setParentId('0')\r\n        getCategorys()\r\n        setParentName('')\r\n    }\r\n\r\n    /*\r\n    响应点击取消: 隐藏确定框\r\n     */\r\n    const handleCancel = () => {\r\n        // 清除输入数据\r\n        form.resetFields()\r\n        // 隐藏确认框\r\n        setShowStatus(0);\r\n    }\r\n\r\n    /*\r\n    显示添加的确认框\r\n     */\r\n    const showAdd = () => {\r\n        setShowStatus(1)\r\n    }\r\n\r\n    /*\r\n    添加分类\r\n     */\r\n    const addCategory = () => {\r\n        form.validateFields(async (err:any, values:any) => {\r\n            if (!err) {\r\n                // 隐藏确认框\r\n                setShowStatus(0);\r\n\r\n                // 收集数据, 并提交添加分类的请求\r\n                const { parentId, categoryName } = values\r\n                // 清除输入数据\r\n                form.resetFields()\r\n                const result = await reqAddCategory(categoryName, parentId)\r\n                if (result.status === 0) {\r\n\r\n                    // 添加的分类就是当前分类列表下的分类\r\n                    if (parentId === parentId) {\r\n                        // 重新获取当前分类列表显示\r\n                        getCategorys()\r\n                    } else if (parentId === '0') { // 在二级分类列表下添加一级分类, 重新获取一级分类列表, 但不需要显示一级列表\r\n                        getCategorys('0')\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    /*\r\n    显示修改的确认框\r\n     */\r\n    const showUpdate = ((category: CategoryModel) => {\r\n        // 保存分类对象\r\n        setCategory(category)\r\n        // 更新状态\r\n        setShowStatus(2)\r\n    })\r\n\r\n    /*\r\n    更新分类\r\n     */\r\n    const updateCategory = () => {\r\n        console.log('updateCategory()')\r\n        // 进行表单验证, 只有通过了才处理\r\n        form.validateFields(async (err:any, values:any) => {\r\n            if (!err) {\r\n                // 1. 隐藏确定框\r\n                setShowStatus(0)\r\n\r\n                // 准备数据\r\n                const categoryId = category._id\r\n                const { categoryName } = values\r\n                // 清除输入数据\r\n                form.resetFields()\r\n\r\n                // 2. 发请求更新分类\r\n                const result = await reqUpdateCategory({ categoryId, categoryName })\r\n                if (result.status === 0) {\r\n                    // 3. 重新显示列表\r\n                    getCategorys()\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n\r\n\r\n    // card的左侧\r\n    const title = parentId === '0' ? '一级分类列表' : (\r\n        <span>\r\n            <LinkButton onClick={()=>showCategorys()}>一级分类列表</LinkButton>\r\n            <Icon type='arrow-right' style={{ marginRight: 5 }} />\r\n            <span>{parentName}</span>\r\n        </span>\r\n    )\r\n    // Card的右侧\r\n    const extra = (\r\n        <Button type='primary' onClick={showAdd}>\r\n            <Icon type='plus' />\r\n            添加\r\n            </Button>\r\n    )\r\n\r\n    return (\r\n        <Card title={title} extra={extra}>\r\n            <Table\r\n                bordered\r\n                rowKey='_id'\r\n                loading={loading}\r\n                dataSource={parentId === '0' ? categorys : subCategorys}\r\n                columns={columns}\r\n                pagination={{ defaultPageSize: 5, showQuickJumper: true }}\r\n            />\r\n\r\n            <Modal\r\n                title=\"添加分类\"\r\n                visible={showStatus === 1}\r\n                onOk={addCategory}\r\n                onCancel={handleCancel}\r\n            >\r\n                <AddForm\r\n                    categorys={categorys}\r\n                    parentId={parentId}\r\n                    setForm={(form: any) => { setForm(form) }}\r\n                />\r\n            </Modal>\r\n\r\n            <Modal\r\n                title=\"更新分类\"\r\n                visible={showStatus === 2}\r\n                onOk={updateCategory}\r\n                onCancel={handleCancel}\r\n            >\r\n                <UpdateForm\r\n                    category={category}\r\n                    setForm={(form: any) => { setForm(form) }}\r\n                />\r\n            </Modal>\r\n        </Card>\r\n    )\r\n\r\n}\r\n\r\nexport default connect(\r\n    (state: any) => (state),\r\n    {}\r\n)(Category)","\r\nexport default class ProductModel {\r\n    name:string='';\r\n    desc:string='';\r\n    price:string='';\r\n    detail:string='';\r\n    imgs:Array<any>=Array<any>();\r\n    status?:number;\r\n    _id?:string;\r\n    categoryId?:string;\r\n    pCategoryId:string='';\r\n}","import ProductModel from \"../models/product\";\r\nimport User from \"../models/user\";\r\n\r\n/*\r\n用来在内存保存一些数据的工具模块\r\n */\r\nclass MemoryUtils{\r\n  user?: User; // 保存当前登陆的user\r\n  product: ProductModel|null=new ProductModel(); // 指定的商品对象\r\n  \r\n}\r\n\r\nexport default new MemoryUtils()","/**\r\n * 模型转换器 前后端模型适配\r\n */\r\n\r\nconst toProduct = (productVo) => {\r\n    let product = {}\r\n    product._id = productVo.id + \"\"\r\n    product.name = productVo.name\r\n    product.desc = productVo.description;\r\n    product.price = productVo.price;\r\n    product.detail = productVo.detail;\r\n    product.imgs =  productVo.imgs?  productVo.imgs:[];\r\n    product.status = productVo.status;\r\n    product.categoryId = productVo.categoryId;\r\n    product.pCategoryId = productVo.pCategoryId;\r\n    return product\r\n}\r\n\r\nconst toProductAddForm = (product) => {\r\n    product.description = product.desc;\r\n    delete product.desc;\r\n    delete product._id;\r\n    return product;\r\n}\r\n\r\n\r\nconst toProductUpdateForm = (product) => {\r\n    product.id=product._id\r\n    product.description = product.desc;\r\n    delete product.desc;\r\n    delete product._id;\r\n    return product;\r\n}\r\n\r\nexport default { toProduct , toProductAddForm ,toProductUpdateForm};","import React, { useState, useContext, useEffect } from 'react'\r\nimport {\r\n    Card,\r\n    Select,\r\n    Input,\r\n    Button,\r\n    Icon,\r\n    Table,\r\n    message\r\n} from 'antd'\r\n\r\nimport LinkButton from '../../components/link-button'\r\nimport { reqProducts, reqSearchProducts, reqUpdateStatus } from '../../api'\r\nimport { PAGE_SIZE } from '../../utils/constants'\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\nimport ProductModel from '../../models/product';\r\nimport converter2Product from '../../converter/converter2Product'\r\n\r\nconst Option = Select.Option\r\n\r\nclass ProductHomeProps {\r\n    history?: any\r\n}\r\n/*\r\nProduct的默认子路由组件\r\n */\r\nconst ProductHome = (props: ProductHomeProps) => {\r\n\r\n    const [pageNum, setPageNum] = useState(1)\r\n    const [columns, setColumns] = useState(new Array<any>())\r\n\r\n    // 商品的总数量\r\n    const [total, setTotal] = useState(0)\r\n    // 商品的数组\r\n    const [products, setProducts] = useState([]);\r\n    // 是否正在加载中\r\n    const [loading, setLoading] = useState(false);\r\n    // 搜索的关键字\r\n    const [searchName, setSearchName] = useState('');\r\n    // 根据哪个字段搜索\r\n    const [searchType, setSearchType] = useState('name');\r\n\r\n    /*\r\n    初始化table的列的数组\r\n     */\r\n    const initColumns = () => {\r\n\r\n        setColumns([\r\n            {\r\n                title: '商品名称',\r\n                dataIndex: 'name',\r\n            },\r\n            {\r\n                title: '商品描述',\r\n                dataIndex: 'desc',\r\n            },\r\n            {\r\n                title: '价格',\r\n                dataIndex: 'price',\r\n                render: (price: any) => '¥' + price  // 当前指定了对应的属性, 传入的是对应的属性值\r\n            },\r\n            {\r\n                width: 100,\r\n                title: '状态',\r\n                // dataIndex: 'status',\r\n                render: (product: ProductModel) => {\r\n                    const { status, _id } = product\r\n                    const newStatus = status === 1 ? 2 : 1\r\n                    return (\r\n                        <span>\r\n                            <Button\r\n                                type='primary'\r\n                                onClick={() => updateStatus(_id! || '', newStatus)}\r\n                            >\r\n                                {status === 1 ? '下架' : '上架'}\r\n                            </Button>\r\n                            <span>{status === 1 ? '在售' : '已下架'}</span>\r\n                        </span>\r\n                    )\r\n                }\r\n            },\r\n            {\r\n                width: 100,\r\n                title: '操作',\r\n                render: (product: ProductModel) => {\r\n                    return (\r\n                        <span>\r\n                            {/*将product对象使用state传递给目标路由组件*/}\r\n                            <LinkButton onClick={() => showDetail(product)}>详情</LinkButton>\r\n                            <LinkButton onClick={() => showUpdate(product)}>修改</LinkButton>\r\n                        </span>\r\n                    )\r\n                }\r\n            },\r\n        ]);\r\n    }\r\n    /*\r\n    显示商品详情界面\r\n     */\r\n    const showDetail = (prodcut: ProductModel) => {\r\n        // 缓存product对象 ==> 给detail组件使用\r\n        memoryUtils.product = prodcut\r\n        props.history.push('/product/detail')\r\n    }\r\n\r\n    /*\r\n    显示修改商品界面\r\n     */\r\n    const showUpdate = (product: ProductModel) => {\r\n        // 缓存product对象 ==> 给detail组件使用\r\n        memoryUtils.product=product;\r\n        props.history.push('/product/update'+'/'+product._id)\r\n    }\r\n\r\n    /*\r\n    获取指定页码的列表数据显示\r\n     */\r\n    const getProducts = async (pageNum: number) => {\r\n        setPageNum(pageNum) // 保存pageNum, 让其它方法可以看到\r\n        setLoading(true) // 显示loading\r\n\r\n        // 如果搜索关键字有值, 说明我们要做搜索分页\r\n        let result\r\n        if (searchName) {\r\n            result = await reqSearchProducts({ pageNum, pageSize: PAGE_SIZE, searchName, searchType })\r\n        } else { // 一般分页请求\r\n            result = await reqProducts(pageNum, PAGE_SIZE)\r\n        }\r\n\r\n        setLoading(false) // 隐藏loading\r\n        if (result.status === 0) {\r\n            // 取出分页数据, 更新状态, 显示分页列表\r\n            const { total, list } = result.data\r\n            setTotal( parseInt(total));\r\n            setProducts(list.map((x: any) => converter2Product.toProduct(x)));\r\n        }\r\n    }\r\n\r\n    /*\r\n    更新指定商品的状态\r\n     */\r\n    const updateStatus = async (productId: string, status: number) => {\r\n        const result = await reqUpdateStatus(productId, status)\r\n        if (result.status === 0) {\r\n            message.success('更新商品成功')\r\n            getProducts(pageNum)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        initColumns()\r\n        getProducts(1)\r\n    }, []);\r\n\r\n    const title = (\r\n        <span>\r\n            <Select\r\n                value={searchType}\r\n                style={{ width: 150 }}\r\n                onChange={(value: any) => { setSearchType(value) }}\r\n            >\r\n                <Option value='name'>按名称搜索</Option>\r\n                <Option value='desc'>按描述搜索</Option>\r\n            </Select>\r\n            <Input\r\n                placeholder='关键字'\r\n                style={{ width: 150, margin: '0 15px' }}\r\n                value={searchName}\r\n                onChange={event => setSearchName(event.target.value)}\r\n            />\r\n            <Button type='primary' onClick={() => getProducts(1)}>搜索</Button>\r\n        </span>\r\n    )\r\n\r\n    const extra = (\r\n        <Button type='primary' onClick={() => props.history.push('/product/addupdate')}>\r\n            <Icon type='plus' />\r\n            添加商品\r\n      </Button>\r\n    )\r\n\r\n    return (\r\n            <Card title={title} extra={extra}>\r\n                <Table\r\n                    bordered\r\n                    rowKey='_id'\r\n                    loading={loading}\r\n                    dataSource={products}\r\n                    columns={columns}\r\n                    pagination={{\r\n                        current: pageNum,\r\n                        total,\r\n                        defaultPageSize: PAGE_SIZE,\r\n                        showQuickJumper: true,\r\n                        onChange: getProducts\r\n                    }}\r\n                />\r\n            </Card>\r\n    )\r\n}\r\n\r\n\r\nexport default ProductHome;","import React, { useState, useEffect, useContext } from 'react'\r\nimport { Upload, Icon, Modal, message } from 'antd'\r\nimport { reqDeleteImg, uploadImg } from '../../api'\r\nimport { BASE_IMG_URL } from \"../../utils/constants\";\r\nimport { UploadChangeParam } from 'antd/lib/upload';\r\nimport { UploadFile } from 'antd/lib/upload/interface';\r\nimport {ProductContext} from './product';\r\n\r\ninterface PicturesWallProps {\r\n}\r\n\r\n/*\r\n用于图片上传的组件\r\n */\r\nconst PicturesWall = (props: PicturesWallProps) => {\r\n\r\n    // 标识是否显示大图预览Modal\r\n    const [previewVisible, setPreviewVisible] = useState(false);\r\n    // 大图的url\r\n    const [previewImage, setPreviewImage] = useState('')\r\n\r\n    const {imgs,imgsRec,dispatch} = useContext(ProductContext);\r\n    /*{\r\n       uid: '-1', // 每个file都有自己唯一的id\r\n       name: 'xxx.png', // 图片文件名\r\n       status: 'done', // 图片状态: done-已上传, uploading: 正在上传中, removed: 已删除\r\n       url: 'http://img.julyyoung.com/ra/img/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png', // 图片地址\r\n     },*/\r\n    const [fileList, setFileList] = useState(Array<any>())\r\n\r\n    // 初始化状态\r\n    useEffect(() => {\r\n        // 如果传入了imgs属性\r\n        if (imgs && imgs.length > 0) {\r\n            const items = imgs.map((img, index) => ({\r\n                uid: -index, // 每个file都有自己唯一的id\r\n                name: img, // 图片文件名\r\n                status: 'done', // 图片状态: done-已上传, uploading: 正在上传中, removed: 已删除\r\n                url: BASE_IMG_URL + img\r\n            }));\r\n            setFileList(items);\r\n        }\r\n        setPreviewVisible(false);// 标识是否显示大图预览Modal\r\n        setPreviewImage(''); // 大图的url\r\n    }, [imgsRec])\r\n\r\n\r\n\r\n    /*\r\n    隐藏Modal\r\n     */\r\n    const handleCancel = () => setPreviewVisible(false);\r\n\r\n    const handlePreview = (file: any) => {\r\n        // 显示指定file对应的大图\r\n        setPreviewImage(file.url || file.thumbUrl);\r\n        setPreviewVisible(true);\r\n    };\r\n\r\n    /*\r\n    file: 当前操作的图片文件(上传/删除)\r\n    fileList: 所有已上传图片文件对象的数组\r\n     */\r\n    const handleChange = async (data: UploadChangeParam<UploadFile<any>>) => {\r\n        let { file, fileList } = data;\r\n\r\n        console.log('handleChange()', file.status, fileList.length, file === fileList[fileList.length - 1])\r\n\r\n        if (file.status === 'removed') { // 删除图片\r\n            const fileName= file.name.replace(BASE_IMG_URL,'');\r\n            const result = await reqDeleteImg(fileName)\r\n            if (result.status === 0) {\r\n                message.success('删除图片成功!')\r\n            } else {\r\n                message.error('删除图片失败!')\r\n            }\r\n        }\r\n\r\n        // 所有已上传图片文件名的数组\r\n        // 在操作(上传/删除)过程中更新fileList状态\r\n        dispatch({type:\"setImgs\",payload:{imgsRec:true,imgs:fileList.map((x:any)=>x.name) }})\r\n        setFileList([...fileList])\r\n    };\r\n\r\n    const uploadButton = (\r\n        <div>\r\n            <Icon type=\"plus\" />\r\n            <div>Upload</div>\r\n        </div>\r\n    );\r\n\r\n    const upload = async (option: any) => {\r\n        const formData = new FormData();\r\n        formData.append('file', option.file);\r\n        const result = await uploadImg(formData)\r\n        if (result.status === 0) {\r\n            message.success('上传图片成功!')\r\n            const url = BASE_IMG_URL + result.msg\r\n\r\n            // 一旦上传成功, 将当前上传的file的信息修正(name, url)\r\n            setFileList((fl: Array<any>) => {\r\n                const file = fl[fl.length - 1];\r\n                if (file) {\r\n                    file.name=result.msg;\r\n                    file.url = url;\r\n                    file.status = 'done';\r\n                }\r\n                dispatch({type:\"setImgs\",payload:{imgsRec:true,imgs:fl.map((x:any)=>x.name) }})\r\n                return [...fl]\r\n            });\r\n\r\n        } else {\r\n            message.error('上传图片失败')\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Upload\r\n                // action={upload}\r\n                accept='image/*'  /*只接收图片格式*/\r\n                name='image' /*请求参数名*/\r\n                method='post'\r\n                listType=\"picture-card\"  /*卡片样式*/\r\n                fileList={fileList}  /*所有已上传图片文件对象的数组*/\r\n                onPreview={handlePreview}\r\n                onChange={handleChange}\r\n                customRequest={upload}\r\n            >\r\n                {fileList.length >= 4 ? null : uploadButton}\r\n            </Upload>\r\n\r\n            <Modal  visible={previewVisible} footer={null} onCancel={handleCancel}>\r\n                <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PicturesWall;","/*\r\n用来指定商品详情的富文本编辑器组件\r\n */\r\nimport React, { useState, useEffect, useContext, memo, useCallback, useMemo } from 'react'\r\n\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css'\r\nimport {ProductContext} from './product';\r\n\r\nconst { EditorState, convertToRaw, ContentState } = require('draft-js')\r\nconst { Editor } = require('react-draft-wysiwyg')\r\nconst draftToHtml = require('draftjs-to-html')\r\nconst htmlToDraft = require('html-to-draftjs')\r\n\r\ninterface RichTextEditorProps {\r\n}\r\n\r\nconst RichTextEditor = memo((props: RichTextEditorProps) => {\r\n\r\n    const { detail, dispatch, detailRec } = useContext(ProductContext);\r\n    // 创建一个没有内容的编辑对象\r\n    const [editorState, setEditorState] = useState(EditorState.createEmpty());\r\n    useEffect(() => {\r\n\r\n        if (detailRec) {\r\n            const html = detail\r\n            if (html) { // 如果有值, 根据html格式字符串创建一个对应的编辑对象\r\n                const contentBlock = htmlToDraft.default(html)\r\n                const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks)\r\n                const editorState = EditorState.createWithContent(contentState)\r\n                setEditorState(editorState);\r\n            } else {\r\n                // 创建一个没有内容的编辑对象\r\n                setEditorState(EditorState.createEmpty());\r\n            }\r\n        }\r\n    }, [detailRec])\r\n\r\n\r\n    /*\r\n    输入过程中实时的回调\r\n     */\r\n    const onEditorStateChange = (editorState: any) => {\r\n        console.log('onEditorStateChange()')\r\n        dispatch({ type: 'setDetail', payload: { detail: getDetail(), productReceived: false } })\r\n        setEditorState(editorState)\r\n    }\r\n\r\n    const getDetail = useCallback(() => {\r\n        // 返回输入数据对应的html格式的文本\r\n        return draftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n    }, [editorState])\r\n\r\n    const uploadImageCallBack = (file: any) => {\r\n        return new Promise(\r\n            (resolve, reject) => {\r\n                const xhr = new XMLHttpRequest()\r\n                xhr.open('POST', '/manage/img/upload')\r\n                const data = new FormData()\r\n                data.append('image', file)\r\n                xhr.send(data)\r\n                xhr.addEventListener('load', () => {\r\n                    const response = JSON.parse(xhr.responseText)\r\n                    const url = response.data.url // 得到图片的url\r\n                    resolve({ data: { link: url } })\r\n                })\r\n                xhr.addEventListener('error', () => {\r\n                    const error = JSON.parse(xhr.responseText)\r\n                    reject(error)\r\n                })\r\n            }\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Editor\r\n            editorState={editorState}\r\n            editorStyle={{ border: '1px solid black', minHeight: 200, paddingLeft: 10 }}\r\n            onEditorStateChange={onEditorStateChange}\r\n            toolbar={{\r\n                image: { uploadCallback: uploadImageCallBack, alt: { present: true, mandatory: true } },\r\n            }}\r\n        />\r\n    )\r\n});\r\n\r\nexport default RichTextEditor;","import React, { useState, useEffect, useRef, useContext, createContext, useReducer, useCallback } from 'react'\r\nimport {\r\n    Card,\r\n    Icon,\r\n    Form,\r\n    Input,\r\n    Cascader,\r\n    Button,\r\n    message\r\n} from 'antd'\r\n\r\nimport PicturesWall from './pictures-wall'\r\nimport RichTextEditor from './rich-text-editor'\r\nimport LinkButton from '../../components/link-button'\r\nimport { reqCategorys, reqAddProduct, reqProduct, reqCategory, reqCategoryParents, reqCategoryTree, reqUpdateProduct } from '../../api'\r\nimport CategoryModel from '../../models/category'\r\nimport ProductModel from '../../models/product'\r\nimport productConverter from '../../converter/converter2Product'\r\n\r\nimport { ProductContext, ProductReducer } from './product';\r\n\r\nimport converter2Product from '../../converter/converter2Product'\r\nimport converter2Category from '../../converter/converter2Category'\r\n\r\nconst { Item } = Form;\r\nconst { TextArea } = Input;\r\n\r\ninterface ProductAddUpdateProps {\r\n    form: any;\r\n    history: any;\r\n    location: any;\r\n    pCategoryId: string;\r\n    categotyId: string;\r\n}\r\n\r\n/*\r\nProduct的添加和更新的子路由组件\r\n */\r\nconst ProductAddUpdate = (props: ProductAddUpdateProps) => {\r\n\r\n    const [options, setOptions] = useState(Array<any>());\r\n    const [product, setProduct] = useState(new ProductModel());\r\n    const [categoryIds, setCategoryIds] = useState(Array());\r\n    const [isUpdate, setIsUpdate] = useState(false);\r\n    const { imgs, detail, dispatch } = useContext(ProductContext);\r\n    const oppholder = useRef<Cascader>(null);\r\n    useEffect(() => {\r\n        const path: string = props.location.pathname;\r\n\r\n        if (path.indexOf('update') > -1) {\r\n            const productId = path.slice((path.lastIndexOf('/') + 1));\r\n            getProduct(productId);\r\n            // 保存是否是更新的标识\r\n            setIsUpdate(true);\r\n        } else {\r\n            getCategorys('0')\r\n        }\r\n        /*\r\n        在卸载之前清除保存的数据\r\n        */\r\n        return () => {\r\n            // dispatch({ type: \"setImgs\", payload: [] });\r\n            dispatch({ type: \"setDetail\", payload: { detail: new ProductModel(), detailRec: false } });\r\n            setIsUpdate(false);\r\n        }\r\n    }, []);\r\n\r\n    const initOptions = async (categorys: Array<CategoryModel>) => {\r\n        // 根据categorys生成options数组\r\n        const options = categorys.map(c => ({\r\n            value: c._id,\r\n            loading: false,\r\n            label: c.name,\r\n            isLeaf: false, // 不是叶子\r\n            children: null\r\n        }))\r\n\r\n        // 如果是一个二级分类商品的更新\r\n        const { pCategoryId } = product\r\n        if (isUpdate && pCategoryId !== '0') {\r\n            // 获取对应的二级分类列表\r\n            const subCategorys = await getCategorys(pCategoryId)\r\n            // 生成二级下拉列表的options\r\n            const childOptions = subCategorys.map((c: CategoryModel) => ({\r\n                key: c._id,\r\n                value: c._id,\r\n                label: c.name,\r\n                isLeaf: true,\r\n            }))\r\n\r\n            // 找到当前商品对应的一级option对象\r\n            const targetOption = options.find(option => option.value === pCategoryId)!\r\n\r\n            // 关联对应的一级option上\r\n            targetOption.loading = false\r\n            targetOption.children = childOptions\r\n        }\r\n\r\n        // 更新options状态\r\n        setOptions([...options]);\r\n    }\r\n\r\n    /*\r\n    异步获取一级/二级分类列表, 并显示\r\n    async函数的返回值是一个新的promise对象, promise的结果和值由async的结果来决定\r\n     */\r\n    const getCategorys = async (parentId: string) => {\r\n        const result = await reqCategorys(parentId)   // {status: 0, data: categorys}\r\n        if (result.status === 0) {\r\n            const categorys = result.data.map((x: any) => productConverter.toProduct(x))\r\n            // 如果是一级分类列表\r\n            if (parentId === '0') {\r\n                initOptions(categorys)\r\n            } else { // 二级列表\r\n                return categorys  // 返回二级列表 ==> 当前async函数返回的promsie就会成功且value为categorys\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     *更新页面专用 \r\n     */\r\n    const initCategoryOptions = async (productChosen: ProductModel) => {\r\n        if (productChosen) {\r\n            const { categoryId, pCategoryId } = productChosen;\r\n            const result = await reqCategoryParents(categoryId);\r\n            const result2 = await reqCategoryTree()\r\n\r\n            if (result.status === 0 && result.data && result2 && result2.data) {\r\n                const categorys = result.data.map((x: any) => converter2Category(x));\r\n                const options = result2.data.map((x: any) => converter2Category(x));\r\n                if (categorys && categorys.length > 0) {\r\n\r\n                    const cats = categorys.map((c: CategoryModel) => ({\r\n                        value: c._id,\r\n                        loading: false,\r\n                        label: c.name,\r\n                        isLeaf: false, // 不是叶子\r\n                        children: null\r\n                    }))\r\n                    const opts = options.map((c: CategoryModel) => convert2Option(c));\r\n                    for (let i = 0; i < cats.length - 1; i++) {\r\n                        cats[i].children = [cats[i + 1]]\r\n                    }\r\n\r\n\r\n                    setOptions(opts)\r\n                    //设置已选择项\r\n                    setCategoryIds([...categorys.map((x: any) => x._id)]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const convert2Option = (c: CategoryModel) => {\r\n        let res: any = {\r\n            value: c._id,\r\n            loading: false,\r\n            label: c.name,\r\n            isLeaf: false, // 不是叶子\r\n            children: null\r\n        }\r\n        if (c.children) {\r\n            res.children = c.children.map((x: any) => {\r\n                return convert2Option(x);\r\n            })\r\n        }\r\n        return res;\r\n    }\r\n\r\n    /*\r\n    async函数的返回值是一个新的promise对象, promise的结果和值由async的结果来决定\r\n     */\r\n    const getProduct = useCallback(async (productId: string) => {\r\n        const result = await reqProduct(productId)   // {status: 0, data: categorys}\r\n        if (result.status === 0 && result.data) {\r\n            const productChosen = converter2Product.toProduct(result.data)\r\n            setProduct(productChosen);\r\n            initCategoryOptions(productChosen)\r\n\r\n            if (productChosen.pCategoryId != '0') {\r\n                categoryIds.push(productChosen.pCategoryId);\r\n                categoryIds.push(productChosen.categoryId);\r\n                setCategoryIds([...categoryIds])\r\n            }\r\n            dispatch({ type: 'setImgs', payload: { imgs: productChosen.imgs, imgsRec: true } });\r\n            dispatch({ type: 'setDetail', payload: { detail: productChosen.detail, detailRec: true } });\r\n        }\r\n    }, [])\r\n\r\n    /*\r\n    验证价格的自定义验证函数\r\n     */\r\n    const validatePrice = (rule: any, value: any, callback: any) => {\r\n        console.log(value, typeof value)\r\n        if (value * 1 > 0) {\r\n            callback() // 验证通过\r\n        } else {\r\n            callback('价格必须大于0') // 验证没通过\r\n        }\r\n    }\r\n\r\n    /*\r\n    用加载下一级列表的回调函数\r\n     */\r\n    const loadData = async (selectedOptions: any) => {\r\n        // 得到选择的option对象\r\n        const targetOption = selectedOptions[0]\r\n        // 显示loading\r\n        targetOption.loading = true\r\n\r\n        // 根据选中的分类, 请求获取二级分类列表\r\n        const subCategorys = await getCategorys(targetOption.value)\r\n        // 隐藏loading\r\n        targetOption.loading = false\r\n        // 二级分类数组有数据\r\n        if (subCategorys && subCategorys.length > 0) {\r\n            // 生成一个二级列表的options\r\n            const childOptions = subCategorys.map((c: CategoryModel) => ({\r\n                id: c._id,\r\n                value: c._id,\r\n                label: c.name,\r\n                isLeaf: true,\r\n                children: null\r\n            }))\r\n            // 关联到当前option上\r\n            targetOption.children = childOptions\r\n\r\n        } else { // 当前选中的分类没有二级分类\r\n            targetOption.isLeaf = true\r\n        }\r\n        //更新级联下拉框\r\n        setOptions(options.map(x => x.value === targetOption.value ? targetOption : x))\r\n\r\n    }\r\n\r\n    const submit = () => {\r\n        // 进行表单验证, 如果通过了, 才发送请求\r\n        props.form.validateFields(async (error: any, values: any) => {\r\n            if (!error) {\r\n\r\n                // 1. 收集数据, 并封装成product对象\r\n                const { name, desc, price, categoryIds } = values\r\n                let pCategoryId, categoryId\r\n                if (categoryIds.length === 1) {\r\n                    pCategoryId = '0'\r\n                    categoryId = categoryIds[0]\r\n                } else {\r\n                    pCategoryId = categoryIds[0]\r\n                    categoryId = categoryIds[1]\r\n                }\r\n\r\n                const prod = { _id: '', name, desc, price, imgs: imgs, detail: detail, pCategoryId, categoryId }\r\n\r\n                let result: any = null;\r\n                // 如果是更新, 需要添加_id\r\n                // 2. 调用接口请求函数去添加/更新\r\n                if (isUpdate) {\r\n                    prod._id = product._id || ''\r\n                    result = await reqUpdateProduct(productConverter.toProductUpdateForm(prod))\r\n                } else {\r\n                    result = await reqAddProduct(productConverter.toProductAddForm(prod))\r\n                }\r\n\r\n                // 3. 根据结果提示\r\n                if (result.status === 0) {\r\n                    message.success(`${isUpdate ? '更新' : '添加'}商品成功!`)\r\n                    props.history.push('/product')\r\n                } else {\r\n                    message.error(`${isUpdate ? '更新' : '添加'}商品失败!`)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    // 指定Item布局的配置对象\r\n    const formItemLayout = {\r\n        labelCol: { span: 2 },  // 左侧label的宽度\r\n        wrapperCol: { span: 8 }, // 右侧包裹的宽度\r\n    }\r\n\r\n    // 头部左侧标题\r\n    const title = (\r\n        <span>\r\n            <LinkButton onClick={() => props.history.goBack()}>\r\n                <Icon type='arrow-left' style={{ fontSize: 20 }} />\r\n            </LinkButton>\r\n            <span>{isUpdate ? '修改商品' : '添加商品'}</span>\r\n        </span>\r\n    )\r\n\r\n    const { getFieldDecorator } = props.form;\r\n\r\n    return (\r\n\r\n        <Card title={title}>\r\n            <Form {...formItemLayout}>\r\n                <Item label=\"商品名称\">\r\n                    {\r\n                        getFieldDecorator('name', {\r\n                            initialValue: product.name,\r\n                            rules: [\r\n                                { required: true, message: '必须输入商品名称' }\r\n                            ]\r\n                        })(<Input placeholder='请输入商品名称' />)\r\n                    }\r\n                </Item>\r\n                <Item label=\"商品描述\">\r\n                    {\r\n                        getFieldDecorator('desc', {\r\n                            initialValue: product.desc,\r\n                            rules: [\r\n                                { required: true, message: '必须输入商品描述' }\r\n                            ]\r\n                        })(<TextArea placeholder=\"请输入商品描述\" autosize={{ minRows: 2, maxRows: 6 }} />)\r\n                    }\r\n\r\n                </Item>\r\n                <Item label=\"商品价格\">\r\n\r\n                    {\r\n                        getFieldDecorator('price', {\r\n                            initialValue: product.price,\r\n                            rules: [\r\n                                { required: true, message: '必须输入商品价格' },\r\n                                { validator: validatePrice }\r\n                            ]\r\n                        })(<Input type='number' placeholder='请输入商品价格' addonAfter='元' />)\r\n                    }\r\n                </Item>\r\n                <Item label=\"商品分类\">\r\n                    {\r\n                        getFieldDecorator('categoryIds', {\r\n                            initialValue: categoryIds,\r\n                            rules: [\r\n                                { required: true, message: '必须指定商品分类' },\r\n                            ]\r\n                        })(\r\n                            <Cascader\r\n                                ref={oppholder}\r\n                                placeholder='请指定商品分类'\r\n                                options={options}  /*需要显示的列表数据数组*/\r\n                                loadData={loadData} /*当选择某个列表项, 加载下一级列表的监听回调*/\r\n                            />\r\n                        )\r\n                    }\r\n\r\n                </Item>\r\n\r\n                <Item label=\"商品图片\">\r\n                    <PicturesWall />\r\n                </Item>\r\n\r\n                <Item label=\"商品详情\" labelCol={{ span: 2 }} wrapperCol={{ span: 20 }}>\r\n                    <RichTextEditor />\r\n                </Item>\r\n                <Item>\r\n                    <Button type='primary' onClick={submit}>提交</Button>\r\n                </Item>\r\n            </Form>\r\n        </Card>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default Form.create()(ProductAddUpdate);","import React, { useState, useEffect } from 'react'\r\nimport {\r\n    Card,\r\n    Icon,\r\n    List\r\n} from 'antd'\r\n\r\nimport LinkButton from '../../components/link-button'\r\nimport { BASE_IMG_URL } from '../../utils/constants'\r\nimport { reqCategory } from '../../api'\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\nimport ProductModel from '../../models/product'\r\n\r\nconst Item = List.Item\r\n\r\ninterface ProductDetailProps {\r\n    history: any;\r\n    name: string;\r\n    desc: string;\r\n    price: string;\r\n    imgs: Array<any>;\r\n    detail: string;\r\n}\r\n/*\r\nProduct的详情子路由组件\r\n */\r\nconst ProductDetail = (props: ProductDetailProps) => {\r\n    // 一级分类名称\r\n    const [cName1, setCName1] = useState('');\r\n    // 二级分类名称\r\n    const [cName2, setCName2] = useState('');\r\n\r\n    useEffect(() => {\r\n        init();\r\n    });\r\n\r\n    const init = async () => {\r\n        if (memoryUtils.product) {\r\n            // 得到当前商品的分类ID\r\n            const { pCategoryId, categoryId } = memoryUtils.product!;\r\n\r\n            if (pCategoryId === '0') { // 一级分类下的商品\r\n                const result = await reqCategory(categoryId)\r\n                const cName1 = result.data.name\r\n                setCName1(cName1);\r\n            } else if (!pCategoryId) { // 二级分类下的商品\r\n                // 一次性发送多个请求, 只有都成功了, 才正常处理\r\n                const results = await Promise.all([reqCategory(pCategoryId), reqCategory(categoryId)])\r\n                const cName1 = results[0].data.name\r\n                const cName2 = results[1].data.name\r\n                setCName1(cName1);\r\n                setCName2(cName2);\r\n            }\r\n        }\r\n    }\r\n\r\n    /*\r\n    在卸载之前清除保存的数据\r\n    */\r\n    useEffect(() => {\r\n        return () => {\r\n            memoryUtils.product = new ProductModel();\r\n        }\r\n    })\r\n\r\n    const title = (\r\n        <span>\r\n            <LinkButton>\r\n                <Icon\r\n                    type='arrow-left'\r\n                    style={{ marginRight: 10, fontSize: 20 }}\r\n                    onClick={() => props.history.goBack()}\r\n                />\r\n            </LinkButton>\r\n\r\n            <span>商品详情</span>\r\n        </span>\r\n    )\r\n    return (\r\n        <Card title={title} className='product-detail'>\r\n            <List>\r\n                <Item>\r\n                    <span className=\"left\">商品名称:</span>\r\n                    <span>{props.name}</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">商品描述:</span>\r\n                    <span>{props.desc}</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">商品价格:</span>\r\n                    <span>{props.price}元</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">所属分类:</span>\r\n                    <span>{cName1} {cName2 ? ' --> ' + cName2 : ''}</span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">商品图片:</span>\r\n                    <span>\r\n                        {\r\n                            props.imgs.map(img => (\r\n                                <img\r\n                                    key={img}\r\n                                    src={BASE_IMG_URL + img}\r\n                                    className=\"product-img\"\r\n                                    alt=\"img\"\r\n                                />\r\n                            ))\r\n                        }\r\n                    </span>\r\n                </Item>\r\n                <Item>\r\n                    <span className=\"left\">商品详情:</span>\r\n                    <span dangerouslySetInnerHTML={{ __html: props.detail }}>\r\n                    </span>\r\n                </Item>\r\n\r\n            </List>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default ProductDetail;","import React, { createContext, useReducer } from 'react'\r\n\r\n\r\nimport ProductHome from './home'\r\nimport ProductAddUpdate from './add-update'\r\nimport ProductDetail from './detail'\r\n\r\nimport './product.less'\r\nimport ProductModel from '../../models/product'\r\n\r\nconst { Switch, Route, Redirect } = require('react-router-dom')\r\n\r\nclass ProductState {\r\n    dispatch: any;\r\n    imgs: Array<any> = Array();\r\n    detail: any;\r\n    detailRec = false;\r\n    imgsRec = false;\r\n}\r\n\r\nexport const ProductContext = createContext(new ProductState());\r\n\r\nexport function ProductReducer(state: any, action: any) {\r\n  switch (action.type) {\r\n      case 'setImgs':\r\n          return { ...state, imgsRec: action.payload.imgsRec, imgs: action.payload.imgs };\r\n      case 'setDetail':\r\n          return { ...state, detailRec: action.payload.detailRec, detail: action.payload.detail };\r\n      default:\r\n          throw new Error();\r\n  }\r\n}\r\n/*\r\n商品路由\r\n */\r\nconst Product = () => {\r\n  const [state, dispatch] = useReducer(ProductReducer, new ProductState())\r\n  return (\r\n    <ProductContext.Provider value={{ ...state, dispatch: dispatch }}>\r\n      <Switch>\r\n        <Route path='/product' component={ProductHome} exact /> {/*路径完全匹配*/}\r\n        <Route path='/product/add' component={ProductAddUpdate}/>\r\n        <Route path='/product/update' component={ProductAddUpdate}/>\r\n        <Route path='/product/detail' component={ProductDetail} />\r\n        <Redirect to='/product' />\r\n      </Switch>\r\n   </ProductContext.Provider>\r\n  )\r\n}\r\n\r\nexport default Product;","import React, { Component, useEffect, useState } from 'react'\r\nimport { Menu, Icon } from 'antd'\r\nimport MenuModel from '../../models/menu'\r\nimport User from '../../models/user'\r\n\r\nimport logo from '../../assets/images/logo.png'\r\nimport './index.less'\r\nimport { setHeadTitle } from '../../redux/actions'\r\n\r\nconst { connect } = require('react-redux')\r\nconst { Link, withRouter } = require('react-router-dom')\r\nconst SubMenu = Menu.SubMenu;\r\n\r\ninterface LeftNavReduxProps {\r\n    user?: User;\r\n    setHeadTitle(title: string): Function;\r\n    menuList: MenuModel[]\r\n}\r\n\r\ninterface LeftNavProps extends LeftNavReduxProps {\r\n    getMenuNodes(children: MenuModel[]): React.ReactNode\r\n    location: any,\r\n}\r\n/*\r\n左侧导航的组件\r\n */\r\nconst LeftNav = (props: LeftNavProps) => {\r\n\r\n\r\n    const [menuNodes, setMenuNodes] = useState();\r\n    // 得到需要打开菜单项的key\r\n    const [openKey, setOpenKey] = useState(Array<string>());\r\n\r\n\r\n    /*\r\n    判断当前登陆用户对item是否有权限\r\n     */\r\n    const hasAuth = (item: MenuModel) => {\r\n        const { key, isPublic } = item\r\n\r\n        if (!props.user) {\r\n            return false;\r\n        }\r\n        const menus = props.user.roles.menus\r\n        const username = props.user.username\r\n        /*\r\n        1. 如果当前用户是admin\r\n        2. 如果当前item是公开的\r\n        3. 当前用户有此item的权限: key有没有menus中\r\n         */\r\n        if (username === 'admin' || isPublic || menus.indexOf(key) !== -1) {\r\n            return true\r\n        } else if (item.children) { // 4. 如果当前用户有此item的某个子item的权限\r\n            return !!item.children.find(child => menus.indexOf(child.key) !== -1)\r\n        }\r\n        return false\r\n    }\r\n\r\n\r\n    /*\r\n    根据menu的数据数组生成对应的标签数组\r\n    使用reduce() + 递归调用\r\n    */\r\n    const getMenuNodes = (menuList: MenuModel[]) => {\r\n        // 得到当前请求的路由路径\r\n        const path = props.location.pathname\r\n\r\n        return menuList.reduce((pre: any[], item) => {\r\n\r\n            // 如果当前用户有item对应的权限, 才需要显示对应的菜单项\r\n            if (hasAuth(item)) {\r\n                // 向pre添加<Menu.Item>\r\n                if (item.children && (item.children as Array<MenuModel>).length > 0) {\r\n                    // 查找一个与当前请求路径匹配的子Item\r\n                    const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0)\r\n                    // 如果存在, 说明当前item的子列表需要打开\r\n                    if (cItem) {\r\n                        openKey.push(item.key)\r\n                        setOpenKey(openKey)\r\n                    }\r\n                    // 向pre添加<SubMenu>\r\n                    pre.push((\r\n                        <SubMenu\r\n                            key={item.key}\r\n                            title={\r\n                                <span>\r\n                                    <Icon type={item.icon} />\r\n                                    <span>{item.title}</span>\r\n                                </span>\r\n                            }\r\n                        >\r\n                            {getMenuNodes(item.children)}\r\n                        </SubMenu>\r\n                    ))\r\n                } else {\r\n                    // 判断item是否是当前对应的item\r\n                    if (item.key === path || path.indexOf(item.key) === 0) {\r\n                        // 更新redux中的headerTitle状态\r\n                        props.setHeadTitle(item.title)\r\n                    }\r\n                    pre.push((\r\n                        <Menu.Item key={item.key}>\r\n                            <Link to={item.key} onClick={() => {\r\n                                props.setHeadTitle(item.title)\r\n                            }}>\r\n                                <Icon type={item.icon} />\r\n                                <span>{item.title}</span>\r\n                            </Link>\r\n                        </Menu.Item>\r\n                    ))\r\n                }\r\n            }\r\n            return pre\r\n        }, [])\r\n    }\r\n\r\n    /*\r\n    在第一次render()之前执行一次\r\n    为第一个render()准备数据(必须同步的)\r\n     */\r\n    useEffect(() => {\r\n        setMenuNodes(getMenuNodes(props.menuList))\r\n    }, [props.menuList]);\r\n\r\n    // debugger\r\n    // 得到当前请求的路由路径\r\n    const path  = props.location.pathname\r\n       \r\n    return (\r\n        <div className=\"left-nav\">\r\n            <Link to='/' className=\"left-nav-header\">\r\n                <img src={logo} alt=\"logo\" />\r\n                <h1>JULY后台</h1>\r\n            </Link>\r\n\r\n            <Menu\r\n                mode=\"inline\"\r\n                theme=\"dark\"\r\n                selectedKeys={[path]}\r\n                defaultOpenKeys={openKey}\r\n            >\r\n                {\r\n                    menuNodes\r\n                }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n\r\n/*\r\nwithRouter高阶组件:\r\n包装非路由组件, 返回一个新的组件\r\n新的组件向非路由组件传递3个属性: history/location/match\r\n */\r\nexport default connect(\r\n    (state: LeftNavReduxProps) => ({ ...state }),\r\n    { setHeadTitle }\r\n)(withRouter(LeftNav))\r\n","import React, { useState } from 'react'\r\nimport { Card, Button } from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\n\r\n/*\r\n后台管理的柱状图路由组件\r\n */\r\nconst Bar = () => {\r\n    // 销量的数组\r\n    const [sales, setSales] = useState([5, 20, 36, 10, 10, 20]);\r\n    // 库存的数组\r\n    const [stores, setStores] = useState([6, 10, 25, 20, 15, 10]);\r\n    const update = () => {\r\n        setSales(sales.map((sale:number) => sale + 1));\r\n        setStores(\r\n            stores.reduce((pre:Array<number>, store:number) => {\r\n                pre.push(store - 1)\r\n                return pre\r\n            }, [])\r\n        );\r\n    }\r\n\r\n    /*\r\n    返回柱状图的配置对象\r\n     */\r\n    const getOption = (sales: any, stores: any) => {\r\n        return {\r\n            title: {\r\n                text: 'ECharts 入门示例'\r\n            },\r\n            tooltip: {},\r\n            legend: {\r\n                data: ['销量', '库存']\r\n            },\r\n            xAxis: {\r\n                data: [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\r\n            },\r\n            yAxis: {},\r\n            series: [{\r\n                name: '销量',\r\n                type: 'bar',\r\n                data: sales\r\n            }, {\r\n                name: '库存',\r\n                type: 'bar',\r\n                data: stores\r\n            }]\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Card>\r\n                <Button type='primary' onClick={update}>更新</Button>\r\n            </Card>\r\n\r\n            <Card title='柱状图一'>\r\n                <ReactEcharts option={getOption(sales, stores)} />\r\n            </Card>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Bar;","import React, {useState} from 'react'\r\nimport {Card, Button} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\n/*\r\n后台管理的折线图路由组件\r\n */\r\nconst Line =()=> {\r\n\r\n    // 销量的数组\r\n    const [sales, setSales] = useState([5, 20, 36, 10, 10, 20]);\r\n    // 库存的数组\r\n    const [stores, setStores] = useState([6, 10, 25, 20, 15, 10]);\r\n    const update = () => {\r\n        setSales(sales.map((sale:number) => sale + 1));\r\n        setStores(\r\n            stores.reduce((pre:Array<number>, store:number) => {\r\n                pre.push(store - 1)\r\n                return pre\r\n            }, [])\r\n        );\r\n    }\r\n\r\n  /*\r\n  返回柱状图的配置对象\r\n   */\r\n  const getOption = (sales: any, stores: any) =>  {\r\n    return {\r\n      title: {\r\n        text: 'ECharts 入门示例'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data:['销量', '库存']\r\n      },\r\n      xAxis: {\r\n        data: [\"衬衫\",\"羊毛衫\",\"雪纺衫\",\"裤子\",\"高跟鞋\",\"袜子\"]\r\n      },\r\n      yAxis: {},\r\n      series: [{\r\n        name: '销量',\r\n        type: 'line',\r\n        data: sales\r\n      }, {\r\n        name: '库存',\r\n        type: 'line',\r\n        data: stores\r\n      }]\r\n    }\r\n  }\r\n\r\n    return (\r\n      <div>\r\n        <Card>\r\n          <Button type='primary' onClick={update}>更新</Button>\r\n        </Card>\r\n\r\n        <Card title='折线图一'>\r\n          <ReactEcharts option={getOption(sales, stores)} />\r\n        </Card>\r\n\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Line;","import React from 'react'\r\nimport {Card} from 'antd'\r\nimport ReactEcharts from 'echarts-for-react'\r\n\r\n/*\r\n后台管理的饼图路由组件\r\n */\r\nconst Pie =()=> {\r\n\r\n  const getOption = () => {\r\n    return {\r\n      title : {\r\n        text: '某站点用户访问来源',\r\n        subtext: '纯属虚构',\r\n        x:'center'\r\n      },\r\n      tooltip : {\r\n        trigger: 'item',\r\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n      },\r\n      legend: {\r\n        orient: 'vertical',\r\n        left: 'left',\r\n        data: ['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']\r\n      },\r\n      series : [\r\n        {\r\n          name: '访问来源',\r\n          type: 'pie',\r\n          radius : '55%',\r\n          center: ['50%', '60%'],\r\n          data:[\r\n            {value:335, name:'直接访问'},\r\n            {value:310, name:'邮件营销'},\r\n            {value:234, name:'联盟广告'},\r\n            {value:135, name:'视频广告'},\r\n            {value:1548, name:'搜索引擎'}\r\n          ],\r\n          itemStyle: {\r\n            emphasis: {\r\n              shadowBlur: 10,\r\n              shadowOffsetX: 0,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    };\r\n\r\n  }\r\n\r\n  const getOption2 = () => {\r\n    return {\r\n      backgroundColor: '#2c343c',\r\n\r\n      title: {\r\n        text: 'Customized Pie',\r\n        left: 'center',\r\n        top: 20,\r\n        textStyle: {\r\n          color: '#ccc'\r\n        }\r\n      },\r\n\r\n      tooltip : {\r\n        trigger: 'item',\r\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n      },\r\n\r\n      visualMap: {\r\n        show: false,\r\n        min: 80,\r\n        max: 600,\r\n        inRange: {\r\n          colorLightness: [0, 1]\r\n        }\r\n      },\r\n      series : [\r\n        {\r\n          name:'访问来源',\r\n          type:'pie',\r\n          radius : '55%',\r\n          center: ['50%', '50%'],\r\n          data:[\r\n            {value:335, name:'直接访问'},\r\n            {value:310, name:'邮件营销'},\r\n            {value:274, name:'联盟广告'},\r\n            {value:235, name:'视频广告'},\r\n            {value:400, name:'搜索引擎'}\r\n          ].sort(function (a, b) { return a.value - b.value; }),\r\n          roseType: 'radius',\r\n          label: {\r\n            normal: {\r\n              textStyle: {\r\n                color: 'rgba(255, 255, 255, 0.3)'\r\n              }\r\n            }\r\n          },\r\n          labelLine: {\r\n            normal: {\r\n              lineStyle: {\r\n                color: 'rgba(255, 255, 255, 0.3)'\r\n              },\r\n              smooth: 0.2,\r\n              length: 10,\r\n              length2: 20\r\n            }\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              color: '#c23531',\r\n              shadowBlur: 200,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          },\r\n\r\n          animationType: 'scale',\r\n          animationEasing: 'elasticOut',\r\n          animationDelay: function (idx:number) {\r\n            return Math.random() * 200;\r\n          }\r\n        }\r\n      ]\r\n    };\r\n  }\r\n\r\n    return (\r\n      <div>\r\n        <Card title='饼图一'>\r\n          <ReactEcharts option={getOption()} style={{height: 300}}/>\r\n        </Card>\r\n        <Card title='饼图二'>\r\n          <ReactEcharts option={getOption2()} style={{height: 300}}/>\r\n        </Card>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Pie;","import React, { Component } from 'react'\r\nimport { Button, Row, Col } from 'antd'\r\n\r\nimport { setHeadTitle } from '../../redux/actions'\r\nimport './not-found.less'\r\n\r\nconst { connect } = require('react-redux')\r\n\r\ninterface NotFoundProps {\r\n    setHeadTitle: Function;\r\n    history: any;\r\n}\r\n/*\r\n前台404页面\r\n */\r\nconst NotFound = (props: NotFoundProps) => {\r\n\r\n    const goHome = () => {\r\n        props.setHeadTitle('首页')\r\n        props.history.replace('/home')\r\n    }\r\n\r\n    return (\r\n        <Row className='not-found'>\r\n            <Col span={12} className='left'></Col>\r\n            <Col span={12} className='right'>\r\n                <h1>404</h1>\r\n                <h2>抱歉，你访问的页面不存在</h2>\r\n                <div>\r\n                    <Button type='primary' onClick={goHome}>\r\n                        回到首页\r\n            </Button>\r\n                </div>\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    null,\r\n    { setHeadTitle }\r\n)(NotFound)","import React, { useEffect } from 'react'\r\nimport UserModel from '../../models/user';\r\nimport { Layout } from 'antd'\r\n\r\nimport Home from '../home/home'\r\nimport Role from '../role/role'\r\nimport User from '../user/user'\r\nimport Header from '../../components/header'\r\nimport Menu from '../../models/menu';\r\nimport Category from '../category/category'\r\nimport Product from '../product/product'\r\nimport { reqMenuList, setHeadTitle } from '../../redux/actions'\r\nimport LeftNav from '../../components/left-nav';\r\n\r\nimport Bar from '../charts/bar'\r\nimport Line from '../charts/line'\r\nimport Pie from '../charts/pie'\r\nimport NotFound from '../not-found/not-found'\r\n\r\nconst { Redirect, Route, Switch } = require('react-router-dom')\r\n\r\nconst { connect } = require('react-redux')\r\n\r\nconst { Footer, Sider, Content } = Layout\r\n\r\nfunction Admin(props: any) {\r\n\r\n  const user = props.user\r\n  // 如果内存没有存储user ==> 当前没有登陆\r\n  if (!user || !user._id) {\r\n    // 自动跳转到登陆(在render()中)\r\n    return <Redirect to='/login' />\r\n  }\r\n\r\n  return (\r\n    <Layout style={{ minHeight: '100%' }}>\r\n\r\n      <Sider>\r\n        <LeftNav />\r\n      </Sider>\r\n      <Layout>\r\n        <Header>Header</Header>\r\n        <Content style={{ margin: 20, backgroundColor: '#fff' }}>\r\n          <Switch>\r\n            <Redirect exact from='/' to='/home' />\r\n            <Route path='/home' component={Home} />\r\n            <Route path='/category' component={Category} />\r\n            <Route path='/product' component={Product} />\r\n            <Route path='/role' component={Role} />\r\n            <Route path='/user' component={User} />\r\n            <Route path='/charts/bar' component={Bar} />\r\n            <Route path='/charts/line' component={Line} />\r\n            <Route path='/charts/pie' component={Pie} />\r\n            <Route component={NotFound} /> {/*上面没有一个匹配, 直接显示*/}\r\n          </Switch>\r\n        </Content>\r\n        <Footer style={{ textAlign: 'center', color: '#cccccc' }}>推荐使用谷歌浏览器，可以获得更佳页面操作体验</Footer>\r\n      </Layout>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  (state: { user: UserModel; menuList: Array<Menu> }) => ({ user: state.user, menuList: state.menuList }),\r\n  { reqMenuList, setHeadTitle }\r\n)(Admin)","import React from 'react'\nimport Login from './pages/login/login'\nimport Admin from './pages/admin/admin'\n\nimport {\n  login\n} from './redux/actions'\n\nconst {connect} = require( 'react-redux')\n\nconst { HashRouter, Route, Switch } = require('react-router-dom')\n\n/*\n应用的根组件\n */\nconst App: React.FC = () => {\n\n  return (\n    <HashRouter>\n      <Switch> {/*只匹配其中一个*/}\n        <Route path='/login' component={Login}></Route>\n        <Route path='/' component={Admin}></Route>\n      </Switch>\n    </HashRouter>\n  )\n}\n\n\n\n\n// 指定向Counter传入哪些一般属性(属性值的来源就是store中的state)\nconst mapStateToProps = (state:any) => (state)\n/*如果是函数, 会自动调用得到对象, 将对象中的方法作为函数属性传入UI组件*/\n/*如果是对象, 将对象中的方法包装成一个新函数, 并传入UI组件 */\nconst mapDispatchToProps = {login}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","\r\nimport { combineReducers } from 'redux'\r\n\r\nimport {\r\n  SET_HEAD_TITLE,\r\n  RECEIVE_USER,\r\n  SHOW_ERROR_MSG,\r\n  RESET_USER,\r\n  REQ_MENU_LIST\r\n} from './action-types'\r\nimport { reqMenuTree } from '../api/index'\r\n\r\nimport storageUtils from \"../utils/storageUtils\"\r\n\r\nimport { resolve } from 'path'\r\nconst initHeadTitle = ''\r\n\r\nfunction headTitle(state = initHeadTitle, action) {\r\n  switch (action.type) {\r\n    case SET_HEAD_TITLE:\r\n      return action.data\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n/*\r\n用来管理当前登陆用户的reducer函数\r\n */\r\nconst initUser = storageUtils.getUser()\r\n\r\nfunction user(state = initUser, action) {\r\n  switch (action.type) {\r\n    case RECEIVE_USER:\r\n      return action.user\r\n    case SHOW_ERROR_MSG:\r\n      const errorMsg = action.errorMsg\r\n      // state.errorMsg = errorMsg  // 不要直接修改原本状态数据\r\n      return { ...state, errorMsg }\r\n    case RESET_USER:\r\n      window.location.reload();\r\n      return {}\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nfunction menuList(state = [], action) {\r\n  switch (action.type) {\r\n    case REQ_MENU_LIST:\r\n      if (!action.data) return state;\r\n      return action.data;\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n/*\r\n向外默认暴露的是合并产生的总的reducer函数\r\n管理的总的state的结构:\r\n  {\r\n    headTitle: '首页',\r\n    user: {}\r\n  }\r\n */\r\nexport default combineReducers({\r\n  headTitle,\r\n  user,\r\n  menuList\r\n})","/*\r\nredux最核心的管理对象store\r\n */\r\nimport {createStore, applyMiddleware} from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport {composeWithDevTools} from 'redux-devtools-extension'\r\n\r\nimport reducer from './reducer'\r\n\r\n// 向外默认暴露store\r\nexport default createStore(reducer, composeWithDevTools(applyMiddleware(thunk)))","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './redux/store'\n\nconst {Provider} =require( 'react-redux')\n\n// 将App组件标签渲染到index页面的div上\nReactDOM.render((\n    <Provider store={store}>\n      <App />\n    </Provider>\n  ), document.getElementById('root'))\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/*\r\n进行local数据存储管理的工具模块\r\n */\r\nimport User from '../models/user';\r\nconst store = require('store')\r\n\r\nconst USER_KEY = 'user_key'\r\nexport default {\r\n  /*\r\n  保存user\r\n   */\r\n  saveUser(user: User) {\r\n    // localStorage.setItem(USER_KEY, JSON.stringify(user))\r\n    store.set(USER_KEY, user)\r\n  },\r\n\r\n  /*\r\n  读取user\r\n   */\r\n  getUser() {\r\n    // return JSON.parse(localStorage.getItem(USER_KEY) || '{}')\r\n    return store.get(USER_KEY) || {}\r\n  },\r\n\r\n  /*\r\n  删除user\r\n   */\r\n  removeUser() {\r\n    // localStorage.removeItem(USER_KEY)\r\n    store.remove(USER_KEY)\r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\n// export default getUser;","/**\r\n * 模型转换器 前后端模型适配\r\n */\r\n\r\nconst converter2Menu = (menuVo) => {\r\n    let menu = {}\r\n    menu._id = menuVo.id\r\n    menu.title = menuVo.name\r\n    menu.key = menuVo.url\r\n    menu.icon = menuVo.icon\r\n    menu.isPublic = menuVo.hasPub\r\n    menu.children = menuVo.children\r\n    if(menu.children && menu.children instanceof Array ){\r\n        menu.children = menu.children.map(x=>converter2Menu(x))\r\n    }\r\n    return menu\r\n}\r\n\r\nexport default converter2Menu;","/*\r\n能发送异步ajax请求的函数模块\r\n封装axios库\r\n函数的返回值是promise对象\r\n1. 优化1: 统一处理请求异常?\r\n    在外层包一个自己创建的promise对象\r\n    在请求出错时, 不reject(error), 而是显示错误提示\r\n2. 优化2: 异步得到不是reponse, 而是response.data\r\n   在请求成功resolve时: resolve(response.data)\r\n */\r\n\r\nimport axios from 'axios'\r\nimport { message } from 'antd'\r\nimport storageUtils from \"../utils/storageUtils\";\r\nimport { FORM_REQ, MUTI_REQ } from '../utils/constants';\r\n\r\nexport default function ajax(url, data = {}, type = 'GET', form = 0) {\r\n\r\n  return new Promise((resolve, reject) => {\r\n    let promise\r\n    // 1. 执行异步ajax请求\r\n    if (type === 'GET') { // 发GET请求\r\n      promise = axios.get(url, { // 配置对象\r\n        params: data // 指定请求参数\r\n      })\r\n    } else if (form === FORM_REQ) {\r\n      promise = axios({\r\n        method: 'post',\r\n        url: url,\r\n        headers: {\r\n          'Content-type': 'application/x-www-form-urlencoded',\r\n        },\r\n        params: data,\r\n      });\r\n    } else if (form === MUTI_REQ) {\r\n      promise = axios.post(url, data, { headers: { 'Content-type': 'multipart/form-data' }});\r\n    }\r\n    else if (type === 'PUT') {\r\n      promise = axios.put(url, data)\r\n    }\r\n    else if(type === 'DELETE'){\r\n      promise =  axios({\r\n        method: 'delete',\r\n        url: url,\r\n        headers: {\r\n          'Content-type': 'application/x-www-form-urlencoded',\r\n        },\r\n        params: data,\r\n      });\r\n    }else { // 发POST请求\r\n      promise = axios.post(url, data)\r\n    }\r\n    // 2. 如果成功了, 调用resolve(value)\r\n    promise.then(response => {\r\n      //如果身份认证信息失败\r\n      if (response.data.status === 10000) {\r\n        storageUtils.removeUser()\r\n        window.location.reload();\r\n      }else{\r\n        resolve(response.data)\r\n      }\r\n      // 3. 如果失败了, 不调用reject(reason), 而是提示异常信息\r\n    }).catch(error => {\r\n      // reject(error)\r\n      message.error('请求出错了: ' + error.message)\r\n    })\r\n  })\r\n\r\n}\r\n\r\n// 请求登陆接口\r\n// ajax('/login', {username: 'admin', passsword: '123456'}, 'POST',true).then()\r\n\r\n","/*\r\n要求: 能根据接口文档定义接口请求\r\n包含应用中所有接口请求函数的模块\r\n每个函数的返回值都是promise\r\n\r\n基本要求: 能根据接口文档定义接口请求函数\r\n */\r\nimport { message } from 'antd'\r\nimport ajax from './ajax'\r\nimport { MUTI_REQ, FORM_REQ } from '../utils/constants'\r\n\r\n// const BASE = 'http://localhost:5000'\r\nconst BASE = ''\r\n// 登陆\r\nexport const reqLogin = (username, password) => ajax(BASE + '/login', { username, password }, 'POST', FORM_REQ)\r\n\r\n// 获取菜单树\r\nexport const reqMenuTree = () => ajax(BASE + '/menu', {}, 'GET')\r\n\r\n// 获取菜单\r\nexport const reqMenus = (roleId) => ajax(BASE + '/menus', { roleId }, 'GET')\r\n\r\n// 获取一级/二级分类的列表\r\nexport const reqCategorys = (parentId) => ajax(BASE + '/categories', { parentId })\r\n\r\n// 添加分类\r\nexport const reqAddCategory = (name, parentId) => ajax(BASE + 'category', { name, parentId }, 'POST')\r\n\r\n// 更新分类\r\nexport const reqUpdateCategory = ({ categoryId, categoryName }) => ajax(BASE + 'category', { id: categoryId, name: categoryName }, 'PUT')\r\n\r\n// 获取一个分类\r\nexport const reqCategory = (categoryId) => ajax(BASE + '/category', { categoryId })\r\n\r\n// 获取一个分类的所有父类\r\nexport const reqCategoryParents = (categoryId) => ajax(BASE + '/category/parents', { id: categoryId })\r\n// 获取所有类\r\nexport const reqCategoryTree = () => ajax(BASE + '/category/tree', {})\r\n\r\n// 更新商品的状态(上架/下架)\r\nexport const reqUpdateStatus = (productId, status) => ajax(BASE + '/product/updateStatus', { id: productId, status }, 'PUT', FORM_REQ)\r\n\r\n//上传图片\r\nexport const uploadImg = (data) => ajax(BASE + '/img/upload', data, 'POST', MUTI_REQ)\r\n\r\n// 删除指定名称的图片\r\nexport const reqDeleteImg = (name) => ajax(BASE + '/img/delete', { name }, 'POST',FORM_REQ)\r\n// 商品API==================================================================================================================\r\n// 根据Id获取商品\r\nexport const reqProduct = (productId) => ajax(BASE + '/product', { productId })\r\n// 获取商品分页列表\r\nexport const reqProducts = (pageNum, pageSize) => ajax(BASE + '/products', { pageNum, pageSize })\r\n// 添加商品\r\nexport const reqAddProduct = (product) => { delete product._id; return ajax(BASE + '/product', { ...product }, 'POST') }\r\n// 修改商品\r\nexport const reqUpdateProduct = (product) => ajax(BASE + '/product', product, 'PUT')\r\n/*\r\n搜索商品分页列表 (根据商品名称/商品描述)\r\nsearchType: 搜索的类型, productName/productDesc\r\n */\r\nexport const reqSearchProducts = ({ pageNum, pageSize, searchName, searchType }) => ajax(BASE + '/products', {\r\n  pageNum,\r\n  pageSize,\r\n  [searchType]: searchName,\r\n})\r\n\r\n// 角色API===================================================================================================================\r\n// 获取所有角色的列表\r\nexport const reqRoles = () => ajax(BASE + '/roles')\r\n// 添加角色\r\nexport const reqAddRole = (roleName) => ajax(BASE + '/role', { name: roleName }, 'POST')\r\n// 添加角色\r\nexport const reqUpdateRole = (roleId, menuKeys) => ajax(BASE + '/role', { id: roleId, permissionKeys: menuKeys }, 'PUT')\r\n\r\n// 用户API===================================================================================================================\r\n// 获取所有用户的列表\r\nexport const reqUsers = (pagination) => ajax(BASE + '/users', { page: pagination.current, size: pagination.pageSize })\r\n// 删除指定用户\r\nexport const reqDeleteUser = (userId) => ajax(BASE + '/user', { id:userId }, 'DELETE')\r\n// 添加用户\r\nexport const reqAddUser = (user) => ajax(BASE + '/user', user, 'POST')\r\n// 更新用户\r\nexport const reqUpdateUser = (user) => ajax(BASE + '/user', user, 'PUT')\r\n\r\n/*\r\njson请求的接口请求函数\r\n */\r\nexport const reqWeather = async (cityId) =>\r\n  ajax(BASE + '/weather', { cityId }, 'GET')\r\n    .then(await (data => {\r\n      // 如果成功了\r\n      if (data.status === 0 && data.data.status === 200) {\r\n        // 取出需要的数据\r\n        return data.data.data\r\n      } else {\r\n        // 如果失败了\r\n        message.error('获取天气信息失败!')\r\n      }\r\n\r\n    })\r\n    )\r\n// reqWeather('杭州')\r\n/*\r\njsonp解决ajax跨域的原理\r\n  1). jsonp只能解决GET类型的ajax请求跨域问题\r\n  2). jsonp请求不是ajax请求, 而是一般的get请求\r\n  3). 基本原理\r\n   浏览器端:\r\n      动态生成<script>来请求后台接口(src就是接口的url)\r\n      定义好用于接收响应数据的函数(fn), 并将函数名通过请求参数提交给后台(如: callback=fn)\r\n   服务器端:\r\n      接收到请求处理产生结果数据后, 返回一个函数调用的js代码, 并将结果数据作为实参传入函数调用\r\n   浏览器端:\r\n      收到响应自动执行函数调用的js代码, 也就执行了提前定义好的回调函数, 并得到了需要的结果数据\r\n */","module.exports = \"data:image/png;base64,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\"","/**\r\n * 模型转换器 前后端模型适配\r\n */\r\n\r\nimport converter2Menu from \"./converter2Menu\";\r\nimport converter2Role from \"./converter2Role\";\r\n\r\nconst converter2User = (userVo) => {\r\n    let user = {};\r\n    user._id = userVo.userId\r\n    user.username = userVo.username\r\n    user.email = userVo.email\r\n    user.phone = userVo.phone\r\n    user.gmtCreate = userVo.gmtCreate\r\n    user.roles = userVo.roles\r\n    user.roleNames = userVo.roles.map(x=>x.name).join(',')\r\n    if (user.roles && user.roles instanceof Array) {\r\n        user.roles = user.roles.map(x => {\r\n            const role = converter2Role(x)\r\n            if (role && role.menus instanceof Array) {\r\n                role.menus = role.menus.map(y => converter2Menu(y))\r\n            }\r\n            return role\r\n        })\r\n    }\r\n    return user;\r\n}\r\n\r\nexport default converter2User;","/**\r\n * 模型转换器 前后端模型适配\r\n */\r\n\r\nconst converter2Role= (roleVo) => {\r\n    let role = {};\r\n    role.name = roleVo.name;\r\n    role.menus = roleVo.permissions;\r\n    role._id=roleVo.id;\r\n    role.gmtCreate=roleVo.gmtCreate;\r\n    role.gmtAuth=roleVo.gmtAuth;\r\n    role.authUser=roleVo.authUserName;\r\n    return role\r\n}\r\n\r\nexport default converter2Role;","/*\r\n包含一些常量值的模块\r\n */\r\nexport const PAGE_SIZE = 3 // 每页显示的记录数\r\nexport const BASE_IMG_URL = 'http://www.julyyoung.com/img/' // 图片的基础路径\r\n// export const BASE_IMG_URL = ' http://127.0.0.1:8080/'          // 图片的基础路径\r\nexport const JSON_REQ=0;\r\nexport const FORM_REQ=1;\r\nexport const MUTI_REQ=2;\r\n\r\n","import { reqMenuTree } from \"../api/index\";\r\nimport converter2Menu from \"../converter/converter2Menu\";\r\nconst MenuService = {\r\n\r\n  reqMenuTree: async () => {\r\n    const result = await reqMenuTree();\r\n    if (result.status === 0) {\r\n      return result.data.map((x: any) => converter2Menu(x));\r\n    }\r\n  }\r\n}\r\n\r\nexport default MenuService;","/*\r\n包含n个action creator函数的模块\r\n同步action: 对象 {type: 'xxx', data: 数据值}\r\n异步action: 函数  dispatch => {}\r\n */\r\nimport {\r\n  SET_HEAD_TITLE,\r\n  RECEIVE_USER,\r\n  SHOW_ERROR_MSG,\r\n  RESET_USER,\r\n  REQ_MENU_LIST\r\n} from './action-types'\r\nimport storageUtils from \"../utils/storageUtils\";\r\nimport converter2User from \"../converter/converter2User\";\r\nimport menuService from \"../service/MenuService\";\r\n\r\n\r\nconst { reqLogin } = require('../api')\r\n\r\n/*\r\n设置头部标题的同步action\r\n */\r\nexport const setHeadTitle = (headTitle) => ({ type: SET_HEAD_TITLE, data: headTitle })\r\n\r\n/**\r\n * 获取菜单列表\r\n */\r\nexport const reqMenuList = ()=> {\r\n\r\n  return async dispatch => {\r\n  \r\n    const data =await menuService.reqMenuTree();\r\n  \r\n    dispatch({\r\n      type: REQ_MENU_LIST,\r\n      data: data\r\n  });\r\n  }\r\n}\r\n\r\n/*\r\n接收用户的同步action\r\n */\r\nexport const receiveUser = (user) => ({ type: RECEIVE_USER, user })\r\n\r\n/*\r\n显示错误信息同步action\r\n */\r\nexport const showErrorMsg = (errorMsg) => ({ type: SHOW_ERROR_MSG, errorMsg })\r\n\r\n/*\r\n退出登陆的同步action\r\n */\r\nexport const logout = () => {\r\n  // 删除local中的user\r\n  storageUtils.removeUser()\r\n  // 返回action对象\r\n  return { type: RESET_USER }\r\n}\r\n\r\n/*\r\n登陆的异步action\r\n */\r\nexport const login = (username, password) => {\r\n\r\n  return async dispatch => {\r\n    // 1. 执行异步ajax请求\r\n    const result = await reqLogin(username, password)  // {status: 0, data: user} {status: 1, msg: 'xxx'}\r\n    // 2.1. 如果成功, 分发成功的同步action\r\n    if (result.status === 0) {\r\n      const user = converter2User( result.data)\r\n      // 保存local中\r\n      storageUtils.saveUser(user)\r\n      // 分发接收用户的同步action\r\n      dispatch(receiveUser(user))\r\n    } else { // 2.2. 如果失败, 分发失败的同步action\r\n      const msg = result.msg\r\n      // message.error(msg)\r\n      dispatch(showErrorMsg(msg))\r\n    }\r\n  }\r\n}\r\n","/*\r\n包含n个action的type常量标识名称的模块\r\n */\r\nexport const SET_HEAD_TITLE = 'set_head_title' // 设置头部标题\r\nexport const RECEIVE_USER = 'receive_user'  // 接收用户信息\r\nexport const SHOW_ERROR_MSG = 'show_error_msg' // 显示错误信息\r\nexport const RESET_USER = 'reset_user' // 重置用户信息\r\nexport const REQ_MENU_LIST = 'req_menu_list'"],"sourceRoot":""}