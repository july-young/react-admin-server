(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[93],{1468:function(e,t,n){"use strict";function r(){Object(L.a)(this,r),this._id="",this.name="",this.authTime="",this.authUser="",this.menus=[]}n.r(t);var o=n(43),a=(n(360),n(361)),c=n.n(a),i=(n(453),n(472)),u=n.n(i),l=(n(507),n(519)),s=n.n(l),f=(n(248),n(231)),d=n.n(f),p=n(667),b=(n(79),n(42)),h=n.n(b),v=n(14),y=n.n(v),m=n(24),O=n(273),g=n(0),E=n.n(g),C=n(2),N=n(40),S=(n(283),n(308)),_=n.n(S),j=(n(329),n(330)),k=n.n(j),P=k.a.Item,w=k.a.create()((function(e){Object(g.useEffect)((function(){e.setForm(e.form)}),[1]);var t=e.form.getFieldDecorator;return E.a.createElement(k.a,null,E.a.createElement(P,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},{labelCol:{span:4},wrapperCol:{span:15}}),t("roleName",{initialValue:"",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(E.a.createElement(_.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))))})),x=(n(984),n(986)),M=n.n(x),D=n(48),T=k.a.Item,A=M.a.TreeNode,U=k.a.create()((function(e){var t=Object(g.useState)(),n=Object(O.a)(t,2),r=n[0],o=n[1],a=Object(g.useState)(Array()),c=Object(O.a)(a,2),i=c[0],u=c[1];Object(g.useEffect)((function(){return l(),s(),function(){o([]),u([])}}),[e.role]);var l=function(){var t=Object(m.a)(y.a.mark((function t(){var n,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(N.reqMenuTree)();case 2:n=t.sent,r=n.data,0===n.status&&r&&(e.setForm(e.form),o=r.map((function(e){return Object(D.a)(e)})),u(f(o)));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(m.a)(y.a.mark((function t(){var n,r,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(N.reqMenus)(e.role._id);case 2:n=t.sent,r=n.data,0===n.status&&r&&(a=r.map((function(e){return e.id})),o(a));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function e(t){return t.reduce((function(t,n){return t.push(E.a.createElement(A,{title:n.title,key:n._id},n.children?e(n.children):null)),t}),[])};Object(g.useEffect)((function(){var t=e.role.menus;o(t)}),[]),console.log("AuthForm render()");var d=e.role;return E.a.createElement("div",null,E.a.createElement(T,Object.assign({label:"\u89d2\u8272\u540d\u79f0"},{labelCol:{span:4},wrapperCol:{span:15}}),E.a.createElement(_.a,{value:d.name,disabled:!0})),E.a.createElement(M.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:r,onCheck:function(t){console.log("onCheck",t),e.setUpdateMenuKeys(t),o(t)}},E.a.createElement(A,{title:"\u5e73\u53f0\u6743\u9650",key:"all"},i)))})),I=n(619),R=n(82),L=n(83),K=n(88),F=n(77).connect;t.default=F((function(e){return Object(o.a)({},e)}),{logout:R.logout})((function(e){var t=Object(g.useState)(),n=Object(O.a)(t,2),o=n[0],a=n[1],i=Object(g.useState)(new r),l=Object(O.a)(i,2),f=l[0],b=l[1],v=Object(g.useState)(Array()),S=Object(O.a)(v,2),_=S[0],j=S[1],k=Object(g.useState)(!1),P=Object(O.a)(k,2),x=P[0],M=P[1],D=Object(g.useState)(!1),T=Object(O.a)(D,2),A=T[0],R=T[1],L=Object(g.useState)(),F=Object(O.a)(L,2),H=F[0],W=F[1],G=Object(g.useState)(),B=Object(O.a)(G,2),Q=B[0],Y=B[1],q=Object(g.useState)(0),V=Object(O.a)(q,2),X=V[0],Z=V[1],J=function(){var e=Object(m.a)(y.a.mark((function e(){var t,n,r,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.reqRoles)();case 2:0===(t=e.sent).status&&t.data&&(n=t.data,r=n.list,o=n.total,Z(o),c=r.map((function(e){return Object(K.a)(e)})),a(c));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var t=Object(m.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M(!1),t.next=3,Object(N.reqMenuTree)();case 3:return n=t.sent,f.menus=n,t.next=7,Object(N.reqUpdateRole)(f._id,_);case 7:0===t.sent.status&&(-1<e.user.roles.map((function(e){return e._id})).indexOf(f._id)?(e.logout(),h.a.success("\u5f53\u524d\u7528\u6237\u89d2\u8272\u6743\u9650\u6210\u529f")):(h.a.success("\u8bbe\u7f6e\u89d2\u8272\u6743\u9650\u6210\u529f"),a(Object(p.a)(o))));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(g.useEffect)((function(){W([{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"gmtCreate",render:function(e){return Object(I.a)(e)}},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"gmtAuth",render:function(e){return Object(I.a)(e)}},{title:"\u6388\u6743\u4eba",dataIndex:"authUser"}]),J()}),[]);var $=E.a.createElement("span",null,E.a.createElement(d.a,{type:"primary",onClick:function(){return M(!0)}},"\u521b\u5efa\u89d2\u8272")," \xa0\xa0",E.a.createElement(d.a,{type:"primary",disabled:!f._id,onClick:function(){return R(!0)}},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"));return E.a.createElement(c.a,{title:$},E.a.createElement(s.a,{bordered:!0,rowKey:"_id",dataSource:o,columns:H,pagination:{defaultPageSize:C.e,total:X},rowSelection:{type:"radio",selectedRowKeys:[f._id],onSelect:function(e){b(e)}},onRow:function(e){return{onClick:function(){console.log("row onClick()",e),b(e)}}}}),E.a.createElement(u.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:x,onOk:function(){Q.validateFields(function(){var e=Object(m.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return r=n.roleName,Q.resetFields(),e.next=5,Object(N.reqAddRole)(r);case 5:0===e.sent.status?(h.a.success("\u6dfb\u52a0\u89d2\u8272\u6210\u529f"),M(!1),J()):h.a.error("\u6dfb\u52a0\u89d2\u8272\u5931\u8d25");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},onCancel:function(){M(!1),Q.resetFields()}},E.a.createElement(w,{setForm:function(e){Y(e)}})),E.a.createElement(u.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:A,onOk:z,onCancel:function(){R(!1)}},E.a.createElement(U,{setUpdateMenuKeys:j,setForm:function(e){Y(e)},role:f})))}))},297:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r);function a(e){var t=[];return o.a.Children.forEach(e,(function(e){t.push(e)})),t}},310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},o=r;t.default=o},312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){var c=o.default.unstable_batchedUpdates?function(e){o.default.unstable_batchedUpdates(n,e)}:n;return(0,r.default)(e,t,c,a)};var r=a(n(503)),o=a(n(17));function a(e){return e&&e.__esModule?e:{default:e}}},336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return o.default.Children.forEach(e,(function(e){t.push(e)})),t};var r,o=(r=n(0))&&r.__esModule?r:{default:r}},359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof HTMLElement?e:o.default.findDOMNode(e)};var r,o=(r=n(17))&&r.__esModule?r:{default:r}},416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r};t.default=function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");return"function"!=typeof t.componentWillReceiveProps||o.default.Profiler&&(t.UNSAFE_componentWillReceiveProps=t.componentWillReceiveProps,delete t.componentWillReceiveProps),e}},449:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){"function"==typeof e?e(t):"object"===r(e)&&e&&"current"in e&&(e.current=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.fillRef=o,t.composeRef=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){o(t,e)}))}},t.supportRef=function(e){return!(e.type&&e.type.prototype&&!e.type.prototype.render)&&!("function"==typeof e&&e.prototype&&!e.prototype.render)}},455:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(17),o=n.n(r);function a(e){return e instanceof HTMLElement?e:o.a.findDOMNode(e)}},466:function(e,t,n){"use strict";var r={};function o(e,t){}t.a=function(e,t){!function(e,t,n){t||r[n]||(e(!1,n),r[n]=!0)}(o,e,t)}},481:function(e,t,n){"use strict";var r,o=n(0),a=n.n(o),c=n(17),i=n.n(c),u=n(1),l=n.n(u),s=n(217),f=n(504),d=n(505),p=function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).element,n=void 0===t?document.body:t,r={},o=Object.keys(e);return o.forEach((function(e){r[e]=n.style[e]})),o.forEach((function(t){n.style[t]=e[t]})),r};function b(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),o=document.body.className;if(e){if(!n.test(o))return;return p(h),h={},void(document.body.className=o.replace(n,"").trim())}var a=function(e){if("undefined"==typeof document)return 0;if(void 0===r){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),o=n.style;o.position="absolute",o.top=0,o.left=0,o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var a=t.offsetWidth;n.style.overflow="scroll";var c=t.offsetWidth;a===c&&(c=n.clientWidth),document.body.removeChild(n),r=a-c}return r}();if(a&&(h=p({position:"relative",width:"calc(100% - ".concat(a,"px)")}),!n.test(o))){var c="".concat(o," ").concat(t);document.body.className=c.trim()}}}var h={};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=0,S=!("undefined"!=typeof window&&window.document&&window.document.createElement),_="createPortal"in i.a,j={},k=function(){function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=g(e).call(this,t),(n=!r||"object"!==m(r)&&"function"!=typeof r?E(this):r).getParent=function(){var e=n.props.getContainer;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===m(e)&&e instanceof window.HTMLElement)return e}return document.body},n.getContainer=function(){if(S)return null;if(!n.container){n.container=document.createElement("div");var e=n.getParent();e&&e.appendChild(n.container)}return n.setWrapperClassName(),n.container},n.setWrapperClassName=function(){var e=n.props.wrapperClassName;n.container&&e&&e!==n.container.className&&(n.container.className=e)},n.savePortal=function(e){n._component=e},n.removeCurrentContainer=function(e){n.container=null,n._component=null,_||(e?n.renderComponent({afterClose:n.removeContainer,onClose:function(){},visible:!1}):n.removeContainer())},n.switchScrollingEffect=function(){1!==N||Object.keys(j).length?N||(p(j),j={},b(!0)):(b(),j=p({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))};var o=t.visible;return N=o?N+1:N,n.state={_self:E(n)},n}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(e,a.a.Component),t=e,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t._self,o=e.visible,a=e.getContainer;if(n){var c=n.visible,i=n.getContainer;o!==c&&(N=o&&!c?N+1:N-1),("function"==typeof a&&"function"==typeof i?a.toString()!==i.toString():a!==i)&&r.removeCurrentContainer(!1)}return{prevProps:e}}}],(n=[{key:"componentDidUpdate",value:function(){this.setWrapperClassName()}},{key:"componentWillUnmount",value:function(){var e=this.props.visible;N=e&&N?N-1:N,this.removeCurrentContainer(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.forceRender,o=t.visible,c=null,i={getOpenCount:function(){return N},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect};return _?((r||o||this._component)&&(c=a.a.createElement(d.a,{getContainer:this.getContainer,ref:this.savePortal},n(i))),c):a.a.createElement(f.a,{parent:this,visible:o,autoDestroy:!1,getComponent:function(t){return n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},0<arguments.length&&void 0!==t?t:{},{},i,{ref:e.savePortal}))},getContainer:this.getContainer,forceRender:r},(function(t){var n=t.renderComponent,r=t.removeContainer;return e.renderComponent=n,e.removeContainer=r,null}))}}])&&O(t.prototype,n),r&&O(t,r),e}();k.propTypes={wrapperClassName:l.a.string,forceRender:l.a.bool,getContainer:l.a.any,children:l.a.func,visible:l.a.bool},t.a=Object(s.polyfill)(k)},619:function(e,t,n){"use strict";function r(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}n.d(t,"a",(function(){return r}))},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnOnlyTreeNode=function(){s||(s=!0,(0,a.default)(!1,"Tree only accept TreeNode as children."))},t.arrDel=function(e,t){var n=e.slice(),r=n.indexOf(t);return 0<=r&&n.splice(r,1),n},t.arrAdd=function(e,t){var n=e.slice();return-1===n.indexOf(t)&&n.push(t),n},t.posToArr=function(e){return e.split("-")},t.getPosition=f,t.isTreeNode=d,t.getNodeChildren=p,t.isCheckDisabled=b,t.traverseTreeNodes=h,t.mapChildren=function(e,t){var n=(0,o.default)(e).map(t);return 1!==n.length?n:n[0]},t.getDragNodesKeys=function(e,t){var n=t.props,r=n.eventKey,o=n.pos,a=[];return h(e,(function(e){var t=e.key;a.push(t)})),a.push(r||o),a},t.calcDropPosition=function(e,t){var n=e.clientY,r=t.selectHandle.getBoundingClientRect(),o=r.top,a=r.bottom,c=r.height,i=Math.max(c*u,l);return n<=o+i?-1:a-i<=n?1:0},t.calcSelectedKeys=function(e,t){if(e)return t.multiple?e.slice():e.length?[e[0]]:e},t.convertDataToTree=function e(t,n){if(!t)return[];var o=(n||{}).processProps,a=void 0===o?y:o;return(Array.isArray(t)?t:[t]).map((function(t){var o=t.children,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["children"]),u=e(o,n);return r.default.createElement(c.default,Object.assign({},a(i)),u)}))},t.convertTreeToEntities=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.initWrapper,r=t.processEntity,o=t.onProcessFinished,a={},c={},i={posEntities:a,keyEntities:c};return n&&(i=n(i)||i),h(e,(function(e){var t=e.node,n=e.index,o=e.pos,u=e.key,l=e.parentPos,s={node:t,index:n,key:u,pos:o};a[o]=s,(c[u]=s).parent=a[l],s.parent&&(s.parent.children=s.parent.children||[],s.parent.children.push(s)),r&&r(s,i)})),o&&o(i),i},t.parseCheckedKeys=function(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!==function(e){return("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(e))return(0,a.default)(!1,"`checkedKeys` is not an array or an object"),null;t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return t.checkedKeys=v(t.checkedKeys),t.halfCheckedKeys=v(t.halfCheckedKeys),t},t.conductCheck=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o={},c={};function i(e){var r=n[e];if(r){var i=r.children,u=r.parent,l=r.node;o[e]=t,b(l)||((i||[]).filter((function(e){return!b(e.node)})).forEach((function(e){!function e(r){if(o[r]!==t){var a=n[r];if(a){var c=a.children;b(a.node)||(o[r]=t,(c||[]).forEach((function(t){e(t.key)})))}}}(e.key)})),u&&function e(r){if(o[r]!==t){var a=n[r];if(a){var i=a.children,u=a.parent;if(!b(a.node)){var l=!0,s=!1;(i||[]).filter((function(e){return!b(e.node)})).forEach((function(e){var t=e.key,n=o[t],r=c[t];(n||r)&&(s=!0),n||(l=!1)})),o[r]=!!t&&l,c[r]=s,u&&e(u.key)}}}}(u.key))}else(0,a.default)(!1,"'".concat(e,"' does not exist in the tree."))}(r.checkedKeys||[]).forEach((function(e){o[e]=!0})),(r.halfCheckedKeys||[]).forEach((function(e){c[e]=!0})),(e||[]).forEach((function(e){i(e)}));var u=[],l=[];return Object.keys(o).forEach((function(e){o[e]&&u.push(e)})),Object.keys(c).forEach((function(e){!o[e]&&c[e]&&l.push(e)})),{checkedKeys:u,halfCheckedKeys:l}},t.conductExpandParent=function(e,t){var n={};return(e||[]).forEach((function(e){!function e(r){if(!n[r]){var o=t[r];if(o){n[r]=!0;var a=o.parent,c=o.node;c.props&&c.props.disabled||a&&e(a.key)}}}(e)})),Object.keys(n)},t.getDataAndAria=function(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)||(t[n]=e[n]),t}),{})};var r=function(e){if(e&&e.__esModule)return e;var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}}return n.default=e,t&&t.set(e,n),n}(n(0)),o=i(n(336)),a=i(n(260)),c=i(n(988));function i(e){return e&&e.__esModule?e:{default:e}}var u=.25,l=2,s=!1;function f(e,t){return"".concat(e,"-").concat(t)}function d(e){return e&&e.type&&e.type.isTreeNode}function p(e){return(0,o.default)(e).filter(d)}function b(e){var t=e.props||{};return!(!t.disabled&&!t.disableCheckbox)||!1===t.checkable}function h(e,t){!function n(o,a,c){var i=o?o.props.children:e,u=o?f(c.pos,a):0,l=p(i);if(o){var s={node:o,index:a,pos:u,key:o.key||u,parentPos:c.node?c.pos:null};t(s)}r.Children.forEach(l,(function(e,t){n(e,t,{node:o,pos:u})}))}(null)}function v(e){return e?e.map((function(e){return String(e)})):e}var y=function(e){return e}},988:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InternalTreeNode=void 0;var r=function(e){if(e&&e.__esModule)return e;var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}}return n.default=e,t&&t.set(e,n),n}(n(0)),o=f(n(1)),a=f(n(35)),c=f(n(989)),i=f(n(336)),u=n(217),l=n(991),s=n(683);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(){function e(){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=y(e).apply(this,arguments),(t=!o||"object"!==d(o)&&"function"!=typeof o?m(n):o).state={dragNodeHighlight:!1},t.onSelectorClick=function(e){(0,t.props.context.onNodeClick)(e,m(t)),t.isSelectable()?t.onSelect(e):t.onCheck(e)},t.onSelectorDoubleClick=function(e){(0,t.props.context.onNodeDoubleClick)(e,m(t))},t.onSelect=function(e){if(!t.isDisabled()){var n=t.props.context.onNodeSelect;e.preventDefault(),n(e,m(t))}},t.onCheck=function(e){if(!t.isDisabled()){var n=t.props,r=n.disableCheckbox,o=n.checked,a=t.props.context.onNodeCheck;if(t.isCheckable()&&!r){e.preventDefault();var c=!o;a(e,m(t),c)}}},t.onMouseEnter=function(e){(0,t.props.context.onNodeMouseEnter)(e,m(t))},t.onMouseLeave=function(e){(0,t.props.context.onNodeMouseLeave)(e,m(t))},t.onContextMenu=function(e){(0,t.props.context.onNodeContextMenu)(e,m(t))},t.onDragStart=function(e){var n=t.props.context.onNodeDragStart;e.stopPropagation(),t.setState({dragNodeHighlight:!0}),n(e,m(t));try{e.dataTransfer.setData("text/plain","")}catch(e){}},t.onDragEnter=function(e){var n=t.props.context.onNodeDragEnter;e.preventDefault(),e.stopPropagation(),n(e,m(t))},t.onDragOver=function(e){var n=t.props.context.onNodeDragOver;e.preventDefault(),e.stopPropagation(),n(e,m(t))},t.onDragLeave=function(e){var n=t.props.context.onNodeDragLeave;e.stopPropagation(),n(e,m(t))},t.onDragEnd=function(e){var n=t.props.context.onNodeDragEnd;e.stopPropagation(),t.setState({dragNodeHighlight:!1}),n(e,m(t))},t.onDrop=function(e){var n=t.props.context.onNodeDrop;e.preventDefault(),e.stopPropagation(),t.setState({dragNodeHighlight:!1}),n(e,m(t))},t.onExpand=function(e){(0,t.props.context.onNodeExpand)(e,m(t))},t.setSelectHandle=function(e){t.selectHandle=e},t.getNodeChildren=function(){var e=t.props.children,n=(0,i.default)(e).filter((function(e){return e})),r=(0,s.getNodeChildren)(n);return n.length!==r.length&&(0,s.warnOnlyTreeNode)(),r},t.getNodeState=function(){var e=t.props.expanded;return t.isLeaf()?null:e?"open":"close"},t.isLeaf=function(){var e=t.props,n=e.isLeaf,r=e.loaded,o=t.props.context.loadData,a=0!==t.getNodeChildren().length;return!1!==n&&(n||!o&&!a||o&&r&&!a)},t.isDisabled=function(){var e=t.props.disabled,n=t.props.context.disabled;return!1!==e&&!(!n&&!e)},t.isCheckable=function(){var e=t.props.checkable,n=t.props.context.checkable;return!(!n||!1===e)&&n},t.syncLoadData=function(e){var n=e.expanded,r=e.loading,o=e.loaded,a=t.props.context,c=a.loadData,i=a.onNodeLoad;r||c&&n&&!t.isLeaf()&&(0!==t.getNodeChildren().length||o||i(m(t)))},t.renderSwitcher=function(){var e=t.props,n=e.expanded,o=e.switcherIcon,c=t.props.context,i=c.prefixCls,u=c.switcherIcon,l=o||u;if(t.isLeaf())return r.createElement("span",{className:(0,a.default)("".concat(i,"-switcher"),"".concat(i,"-switcher-noop"))},"function"==typeof l?l(b({},t.props,{isLeaf:!0})):l);var s=(0,a.default)("".concat(i,"-switcher"),"".concat(i,"-switcher_").concat(n?"open":"close"));return r.createElement("span",{onClick:t.onExpand,className:s},"function"==typeof l?l(b({},t.props,{isLeaf:!1})):l)},t.renderCheckbox=function(){var e=t.props,n=e.checked,o=e.halfChecked,c=e.disableCheckbox,i=t.props.context.prefixCls,u=t.isDisabled(),l=t.isCheckable();if(!l)return null;var s="boolean"!=typeof l?l:null;return r.createElement("span",{className:(0,a.default)("".concat(i,"-checkbox"),n&&"".concat(i,"-checkbox-checked"),!n&&o&&"".concat(i,"-checkbox-indeterminate"),(u||c)&&"".concat(i,"-checkbox-disabled")),onClick:t.onCheck},s)},t.renderIcon=function(){var e=t.props.loading,n=t.props.context.prefixCls;return r.createElement("span",{className:(0,a.default)("".concat(n,"-iconEle"),"".concat(n,"-icon__").concat(t.getNodeState()||"docu"),e&&"".concat(n,"-icon_loading"))})},t.renderSelector=function(){var e,n=t.state.dragNodeHighlight,o=t.props,c=o.title,i=o.selected,u=o.icon,l=o.loading,s=t.props.context,f=s.prefixCls,d=s.showIcon,p=s.icon,b=s.draggable,h=s.loadData,v=t.isDisabled(),y="".concat(f,"-node-content-wrapper");if(d){var m=u||p;e=m?r.createElement("span",{className:(0,a.default)("".concat(f,"-iconEle"),"".concat(f,"-icon__customize"))},"function"==typeof m?m(t.props):m):t.renderIcon()}else h&&l&&(e=t.renderIcon());var O=r.createElement("span",{className:"".concat(f,"-title")},c);return r.createElement("span",{ref:t.setSelectHandle,title:"string"==typeof c?c:"",className:(0,a.default)("".concat(y),"".concat(y,"-").concat(t.getNodeState()||"normal"),!v&&(i||n)&&"".concat(f,"-node-selected"),!v&&b&&"draggable"),draggable:!v&&b||void 0,"aria-grabbed":!v&&b||void 0,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onContextMenu:t.onContextMenu,onClick:t.onSelectorClick,onDoubleClick:t.onSelectorDoubleClick,onDragStart:b?t.onDragStart:void 0},e,O)},t.renderChildren=function(){var e=t.props,n=e.expanded,o=e.pos,i=t.props.context,u=i.prefixCls,l=i.motion,f=i.renderTreeNode,d=t.getNodeChildren();return 0===d.length?null:r.createElement(c.default,Object.assign({visible:n},l),(function(e){var t=e.style,c=e.className;return r.createElement("ul",{className:(0,a.default)(c,"".concat(u,"-child-tree"),n&&"".concat(u,"-child-tree-open")),style:t,"data-expanded":n,role:"group"},(0,s.mapChildren)(d,(function(e,t){return f(e,t,o)})))}))},t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(e,r.Component),t=e,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.eventKey,n=e.context.registerTreeNode;this.syncLoadData(this.props),n(t,this)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.eventKey;(0,e.context.registerTreeNode)(t,null)}},{key:"isSelectable",value:function(){var e=this.props.selectable,t=this.props.context.selectable;return"boolean"==typeof e?e:t}},{key:"render",value:function(){var e,t=this.props.loading,n=this.props,o=n.className,c=n.style,i=n.dragOver,u=n.dragOverGapTop,l=n.dragOverGapBottom,f=n.isLeaf,d=n.expanded,p=n.selected,b=n.checked,v=n.halfChecked,y=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","expanded","selected","checked","halfChecked"]),m=this.props.context,O=m.prefixCls,g=m.filterTreeNode,E=m.draggable,C=this.isDisabled(),N=(0,s.getDataAndAria)(y);return r.createElement("li",Object.assign({className:(0,a.default)(o,(h(e={},"".concat(O,"-treenode-disabled"),C),h(e,"".concat(O,"-treenode-switcher-").concat(d?"open":"close"),!f),h(e,"".concat(O,"-treenode-checkbox-checked"),b),h(e,"".concat(O,"-treenode-checkbox-indeterminate"),v),h(e,"".concat(O,"-treenode-selected"),p),h(e,"".concat(O,"-treenode-loading"),t),h(e,"drag-over",!C&&i),h(e,"drag-over-gap-top",!C&&u),h(e,"drag-over-gap-bottom",!C&&l),h(e,"filter-node",g&&g(this)),e)),style:c,role:"treeitem",onDragEnter:E?this.onDragEnter:void 0,onDragOver:E?this.onDragOver:void 0,onDragLeave:E?this.onDragLeave:void 0,onDrop:E?this.onDrop:void 0,onDragEnd:E?this.onDragEnd:void 0},N),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector(),this.renderChildren())}}])&&v(t.prototype,n),e}();function E(e){return r.createElement(l.TreeContext.Consumer,null,(function(t){return r.createElement(g,Object.assign({},e,{context:t}))}))}(t.InternalTreeNode=g).propTypes={eventKey:o.default.string,prefixCls:o.default.string,className:o.default.string,style:o.default.object,onSelect:o.default.func,expanded:o.default.bool,selected:o.default.bool,checked:o.default.bool,loaded:o.default.bool,loading:o.default.bool,halfChecked:o.default.bool,children:o.default.node,title:o.default.node,pos:o.default.string,dragOver:o.default.bool,dragOverGapTop:o.default.bool,dragOverGapBottom:o.default.bool,isLeaf:o.default.bool,checkable:o.default.bool,selectable:o.default.bool,disabled:o.default.bool,disableCheckbox:o.default.bool,icon:o.default.oneOfType([o.default.node,o.default.func]),switcherIcon:o.default.oneOfType([o.default.node,o.default.func])},(0,u.polyfill)(g),E.defaultProps={title:"---"},E.isTreeNode=1;var C=E;t.default=C},991:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=(t.TreeContext=void 0,((r=n(279))&&r.__esModule?r:{default:r}).default)(null);t.TreeContext=o}}]);